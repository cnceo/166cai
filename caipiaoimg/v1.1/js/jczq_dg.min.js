$(function(){function p(a){return 0==a?"0.00":Math.round(100*a)/100}function v(a,b,c,d,f){a.removeClass("selected");var e=cx.MatchCollection.get(c);e.removeOption(d,f);a=["cbf","jqs","bqc"];if(-1<$.inArray(d,a)){var g=0;null!=e&&$.each(a,function(){g+=e.playOptionsCount[this]});0==g?b.find(".open-attach").removeClass("selected").empty().html('\x3cdiv class\x3d"jc-table-action"\x3e\x3ca href\x3d"javascript:;"\x3e\u66f4\u591a\x3ci class\x3d"arrow"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e'):b.find(".open-attach").empty().html(['\x3cdiv class\x3d"jc-table-action selected"\x3e\x3ca href\x3d"javascript:;" class\x3d"selected"\x3e\u5df2\u9009',g,'\u9879\x3ci class\x3d"arrow"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e'].join(""))}e.removeDom(d,f)}var w={hh:0,spf:1,rqspf:2,bqc:3,jqs:4,cbf:5,dg:6},y={spf:{3:"\u4e3b\u80dc",1:"\u5e73",0:"\u5ba2\u80dc"},rqspf:{3:"\u4e3b\u80dc\u3010\u8ba9\u3011",1:"\u5e73\u3010\u8ba9\u3011",0:"\u5ba2\u80dc\u3010\u8ba9\u3011"},bqc:{33:"\u80dc-\u80dc",31:"\u80dc-\u5e73",30:"\u80dc-\u8d1f",13:"\u5e73-\u80dc",11:"\u5e73-\u5e73",10:"\u5e73-\u8d1f","03":"\u8d1f-\u80dc","01":"\u8d1f-\u5e73","00":"\u8d1f-\u8d1f"},jqs:{0:"0\u7403",1:"1\u7403",2:"2\u7403",3:"3\u7403",4:"4\u7403",5:"5\u7403",6:"6\u7403",7:"7+\u7403"},cbf:{10:"1:0",20:"2:0",21:"2:1",30:"3:0",31:"3:1",32:"3:2",40:"4:0",41:"4:1",42:"4:2",50:"5:0",51:"5:1",52:"5:2",93:"\u80dc\u5176\u4ed6","00":"0:0",11:"1:1",22:"2:2",33:"3:3",91:"\u5e73\u5176\u4ed6","01":"0:1","02":"0:2",12:"1:2","03":"0:3",13:"1:3",23:"2:3","04":"0:4",14:"1:4",24:"2:4","05":"0:5",15:"1:5",25:"2:5",90:"\u8d1f\u5176\u4ed6"}},x={spf:{3:0,1:1,0:2},rqspf:{3:0,1:1,0:2},bqc:{33:0,31:1,30:2,13:3,11:4,10:5,"03":6,"01":7,"00":8},jqs:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7},cbf:{10:0,20:1,21:2,30:3,31:4,32:5,40:6,41:7,42:8,50:9,51:10,52:11,93:12,"00":13,11:14,22:15,33:16,91:17,"01":18,"02":19,12:20,"03":21,13:22,23:23,"04":24,14:25,24:26,"05":27,15:28,25:29,90:30}},r=cx.Match=function(a){this.options=a;this.handicap=parseInt(this.options.handicap,10);this.bfCheckMap=null;this.max=0;this.min=Number.POSITIVE_INFINITY;this.maxOptions={};this.minOptions={};this.optionCount=0;this.playOptions={spf:{},rqspf:{},bqc:{},cbf:{},jqs:{}};this.playOptionsCount={spf:0,rqspf:0,bqc:0,cbf:0,jqs:0};this.domOptions={spf:{},rqspf:{},bqc:{},cbf:{},jqs:{}};this.originalPlayOptions={spf:{},rqspf:{},bqc:{},cbf:{},jqs:{}};this.multiOptions={spf:{},rqspf:{},bqc:{},cbf:{},jqs:{}}};r.prototype.addDom=function(a,b,c){this.domOptions[a][b]=c};r.prototype.addOption=function(a,b,c,d){d||(d=1);this.playOptions[a][b]=parseFloat(c);this.originalPlayOptions[a][b]=parseFloat(c);this.multiOptions[a][b]=parseInt(d,10);this.refreshOdds();this.optionCount+=1;this.playOptionsCount[a]+=1};r.prototype.changeMulti=function(a,b,c){this.playOptions[a][b]=this.originalPlayOptions[a][b]*parseInt(c,10);this.multiOptions[a][b]=parseInt(c,10);this.refreshOdds()};r.prototype.removeDom=function(a,b){delete this.domOptions[a][b]};r.prototype.removeOption=function(a,b){delete this.playOptions[a][b];delete this.originalPlayOptions[a][b];delete this.multiOptions[a][b];this.refreshOdds();--this.optionCount;--this.playOptionsCount[a]};r.prototype.refreshOdds=function(){this.max=0;this.min=Number.POSITIVE_INFINITY;this.maxOptions={};this.minoptions={};var a=u.getAllBf();null===this.bfCheckMap&&(this.bfCheckMap=u.getBfCheckMap(this.handicap));var b,c,d,f,e;for(e=0;e<a.length;++e)b=a[e].name,c=u.validateOptByBf(this.bfCheckMap,this.playOptions,b),$.isEmptyObject(c)||(f=d=0,$.each(c,function(b,a){if("BQC"==b.toUpperCase()){var e=0,g=Number.POSITIVE_INFINITY;$.each(a,function(d,a){a>e&&(e=a,c[b]={},c[b][d]=a);a<g&&(g=a)});d+=e;f+=g}else $.each(a,function(b,a){d+=a;f+=a})}),d>this.max&&(this.max=d,this.maxOptions=c),f<this.min&&(this.min=f,this.minOptions=c))};var k=cx.MatchCollection=function(){var a={},b={};a.add=function(a,d){a in b||(b[a]=d)};a.count=function(){var a=0;$.each(b,function(b,c){0<c.optionCount&&(a+=1)});return a};a.has=function(a){return a in b};a.get=function(a){return a in b?b[a]:null};a.getAll=function(){return b};a.getArray=function(){return $.map(b,function(a){if(0<a.optionCount)return a})};return a}(),u=cx.PlayOptions=function(){var a={},b=[];(function(){for(var a,d=0;5>=d;++d)for(a=0;5>=a;++a)3==d&&3<a||3<d&&2<a||b.push({name:d+""+a,jqs:d+a+"",diff:Math.abs(d-a),spf:d>a?"3":d<a?"0":"1",home:d,away:a});b.push({name:"93",jqs:"7",spf:"3",home:9,away:0},{name:"91",jqs:"7",spf:"1",home:9,away:9},{name:"90",jqs:"7",spf:"0",home:0,away:9})})();a.getBfCheckMap=function(a){for(var d={},f,e,c=0;c<b.length;++c){f=[];e=b[c];"3"===e.spf?(f.push("13"),f.push("33"),2<e.jqs&&0<e.away&&f.push("03")):"1"===e.spf?(1<e.jqs&&(f.push("01"),f.push("31")),f.push("11")):"0"===e.spf&&(f.push("00"),f.push("10"),2<e.jqs&&0<e.home&&f.push("30"));var n=parseInt(e.home,10),h=parseInt(e.away,10);d[e.name]={spf:[e.spf],rqspf:["93"===e.name?"3":"91"===e.name?"1":"90"===e.name?"0":n+a>h?"3":n+a==h?"1":"0"],cbf:[e.name],jqs:[e.jqs],bqc:f}}return d};a.getAllBf=function(){return b};a.validateOptByBf=function(a,b,f){var d=a[f],c={};$.each(b,function(a,b){$.each(b,function(b,e){-1<$.inArray(b,d[a])&&(a in c||(c[a]={}),c[a][b]=e)})});return c};return a}(),q=cx.GGTypes=function(){var a={},b={"1*1":[1],"2*1":[2],"3*1":[3],"4*1":[4],"5*1":[5],"6*1":[6],"7*1":[7],"8*1":[8]},c=[];a.addType=function(a){c.push(a);c.sort()};a.removeType=function(a){a=$.inArray(a,c);-1<a&&c.splice(a,1)};a.getOptions=function(){for(var a=[],f,e=0;e<c.length;++e)f=c[e],a=a.concat(b[f]);return a};a.hasType=function(a){return-1<$.inArray(a,c)};a.getTypes=function(){return c};a.refreshGGType=function(b){for(var d=k.getArray(),e=0,g=d.length;e<g;++e)if(0<d[e].playOptionsCount.jqs&&(b=Math.min(b,6)),0<d[e].playOptionsCount.bqc||0<d[e].playOptionsCount.cbf)b=Math.min(b,4);if(1>b)c=[];else for(d=0,e=c.length;d<e;++d)c[d].split("*")[0]>b&&a.removeType(c[d]);z.show()};return a}(),A=cx.Combine=function(a){this.matches=a;this.len=a.length;this.allOld=this.combineCount=this.min=this.max=1;for(var b=0;b<a.length;++b){if(1==a[b].options.cancel){var c=0;$.each(a[b].multiOptions,function(a,b){$.isEmptyObject(b)||$.each(b,function(a,b){c+=b})});a[b].max=c;a[b].min=c}this.max*=a[b].max;this.min*=a[b].min;this.allOld*=a[b].options.old;this.combineCount*=a[b].optionCount}},t=function(){var a={},b={};this.allOdd=1;this.oldcombines={};a.reset=function(){b={};this.oldcombines={};this.allOdd=1};a.addByLen=function(c,d,f){d in b||(b[d]={});c.sort(function(a,b){return a.max-b.max});var e=[].concat(c);e.sort(function(a,b){return a.min-b.min});b[d].max=c;b[d].min=e;var g=0;$(c).each(function(b,c){g+=c.combineCount;a.caloldmax(c,d)});$.isFunction(f)&&f(g)};a.caloldmax=function(a,b){this.allOdd*=a.allOld;1==a.allOld&&(b in this.oldcombines||(this.oldcombines[b]=0),this.oldcombines[b]=a.max+this.oldcombines[b])};a.getBySlice=function(a,d,f,e){a=b[a][d];e||(e=a.length);return a.slice(f,e)};return a}(),m=cx.CastData=function(){function a(){for(var a=k.getArray(),b=["1*1"],d="HH|",e="",c,f=[],g=[],h,n=[],m=0;m<a.length;++m)c=a[m],n.push(c.options.mid),$.each(c.playOptions,function(a,b){if($.isEmptyObject(b))return!0;f=[];e=a.toUpperCase()+"\x3e"+c.options.mid+"\x3d";$.each(b,function(b){var d="";"cbf"==a?(h="93"==b?"90":"91"==b?"99":"90"==b?"09":b,d+=h.split("").join(":")):d="bqc"==a?d+b.split("").join("-"):""+b;"rqspf"==a&&(d+="{"+(0<c.handicap?"+"+c.handicap:c.handicap)+"}");d+="("+c.originalPlayOptions[a][b]+")";d+="@"+c.multiOptions[a][b];f.push(d)});e+=f.join("/");g.push(e)});a=$.inArray("1*1",b);-1<a?1==b.length?d+=g.join(",")+"|1*1":(b.splice(a,1),d+=g.join(",")+"|"+b.join(",")+";HH|"+g.join(",")+"|1*1"):d+=g.join(",")+"|"+b.join(",");return d+="^"+n.join(" ")}var b={},c=0,d=0,f="1970-01-01 00:00:00",e="3000-12-31 23:59:59",g=0,n=0,h=0,m=0,l={};b.getBetMoney=function(){return d};b.setBetMoney=function(a){d=a};b.renderMinMaxMoney=function(){var a=k.count(),b=q.getOptions()[0]||0,d=$(".min-money"),c=$(".max-money");if(1>a||1>q.getOptions().length)d.empty().html("0.00"),c.empty().html("0.00");else{var e=0,f=0;a in l&&($(l[a].max).each(function(a,b){e+=b.max}),$(l[b].min).each(function(a,b){f+=b.min}),1==t.allOdd?($(".fcs").addClass("hidden"),$(".oldfcs").removeClass("hidden"),$(".old-max-money").html(p(2*e))):(t.oldcombines[b]&&(f=t.oldcombines[b]),$(".fcs").removeClass("hidden"),$(".oldfcs").addClass("hidden"),d.empty().html(p(2*f)),c.empty().html(p(2*e))))}};b.setTime=function(){f="1970-01-01 00:00:00";e="3000-12-31 23:59:59";$.each(k.getArray(),function(a,b){b.options.jzdt<e&&(e=b.options.jzdt);b.options.jzdt>f&&(f=b.options.jzdt)})};b.calcOptimization=function(){var a=q.getOptions(),b,d,e,c,f={};for(b=k.count();1<=b;--b)for(d=0;d<a.length;++d)e=a[d],e>b||(c=cx.Math.combine(b,e),b in f||(f[b]={}),f[b].max="max"in f[b]?f[b].max.concat(t.getBySlice(e,"max",-c)):t.getBySlice(e,"max",-c),f[b].min="min"in f[b]?f[b].min.concat(t.getBySlice(e,"min",0,c)):t.getBySlice(e,"min",0,c));return f};b.renderBet=function(){$(".bet-num").empty().html(c);$(".bet-money").empty().html(d)};b.calcCombines=function(){t.reset();c=0;var a=cx.Math.combineList(k.getArray(),q.getOptions(),function(a){return new A(a)});$.each(a,function(a,b){t.addByLen(b,a,function(a){c+=a})});d=2*c};b.calcBetMoney=function(){for(var a=k.getArray(),b,e=0,c=0,f=a.length;c<f;++c)b=a[c],$.each(b.multiOptions,function(a,b){$.isEmptyObject(b)||$.each(b,function(a,b){e+=b})});d=2*e};b.refresh=function(){k.count()&&!q.getOptions().length&&q.addType("1*1");b.calcCombines();l=b.calcOptimization();b.calcBetMoney();b.renderBet();b.renderMinMaxMoney();b.setTime()};$(".bet-bar").on("click",".submit",function(a){var d=$(this);d.addClass("needTigger");if(d.hasClass("not-login")||!$.cookie("name_ie"))b.notLogin(d,a);else if(!d.hasClass("not-bind")){a=$("#hasRead");if(a.get(0)&&!a.is(":checked"))return void new cx.Alert({content:"\u8bf7\u9605\u8bfb\u5e76\u540c\u610f\u300a\u7528\u6237\u59d4\u6258\u6295\u6ce8\u534f\u8bae\u300b"});if(1>k.count())return void new cx.Alert({content:"\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u573a\u6bd4\u8d5b"});a=b.getCastOptions();if(2E5<a.money)return void new cx.Alert({content:["\x3ci class\x3d'icon-font'\x3e\x26#xe611;\x3c/i\x3e\u8ba2\u5355\u603b\u989d\u9700\u5c0f\u4e8e\x3cspan class\x3d'num-red'\x3e",cx.Money.format(2E5),"\x3c/span\x3e\u5143\uff0c\u8bf7\u4fee\u6539\u8ba2\u5355\u540e\u91cd\u65b0\u6295\u6ce8"].join("")});a.isToken=1;cx.castCb(a,{ctype:"create",lotteryId:42,orderType:0,betMoney:a.money,typeCnName:typeCnName})}}).on("click","#optimize",function(){var a=b.getCastOptions2();if(2E5<a.money)return void new cx.Alert({content:["\x3ci class\x3d'icon-font'\x3e\x26#xe611;\x3c/i\x3e\u8ba2\u5355\u603b\u989d\u9700\u5c0f\u4e8e\x3cspan class\x3d'num-red'\x3e",cx.Money.format(2E5),"\x3c/span\x3e\u5143\uff0c\u8bf7\u4fee\u6539\u8ba2\u5355\u540e\u91cd\u65b0\u6295\u6ce8"].join("")});if(1E3<a.betTnum)return void new cx.Alert({content:"\x3ci class\x3d'icon-font'\x3e\x26#xe611;\x3c/i\x3e\u5956\u91d1\u4f18\u5316\u6700\u591a\u652f\u63011000\u6ce8"});if(new Date(e)<=new Date)return void new cx.Alert({content:"\x3ci class\x3d'icon-font'\x3e\x26#xe611;\x3c/i\x3e\u6709\u573a\u6b21\u5df2\u8fc7\u6295\u6ce8\u622a\u6b62\u65f6\u95f4",confirmCb:function(){location.reload()}});$("#optLotteryId").val(a.lid);$("#optBetNum").val(a.betTnum);$("#optMidStr").val(a.codecc);$("#optBetStr").val(a.codes);$("#optEndTime").val(a.endTime);$("#optIssue").val(a.issue);$("#optBetMoney").val(a.money);$("#optMulti").val(a.multi);$("#optopenEndtime").val(a.openEndtime);$("#optimizeForm").submit()});$(".bet-bar").on("click",".btn-hemai:not([class*\x3d'btn-disabled'])",function(a){$(this).addClass("needTigger");if($(this).hasClass("not-login")||!$.cookie("name_ie"))b.notLogin($(this),a);else if(!$(this).hasClass("not-bind")){a=$(".pop-pay").find(".ipt_checkbox#hmagreenment");if(a.get(0)&&!a.is(":checked"))return void new cx.Alert({content:"\u8bf7\u9605\u8bfb\u5e76\u540c\u610f\u300a\u7528\u6237\u59d4\u6258\u6295\u6ce8\u534f\u8bae\u300b"});if(1>k.count())return void new cx.Alert({content:"\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u573a\u6bd4\u8d5b"});if(1==k.count()&&!(-1<$.inArray("1*1",q.getTypes())))return void new cx.Alert({content:"\u8bf7\u81f3\u5c11\u9009\u62e9\u4e24\u573a\u6bd4\u8d5b"});if(1>q.getTypes().length)return void new cx.Alert({content:"\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u79cd\u8fc7\u5173\u65b9\u5f0f"});if(2E5<d)return void new cx.Alert({content:["\x3ci class\x3d'icon-font'\x3e\x26#xe611;\x3c/i\x3e\u8ba2\u5355\u603b\u989d\u9700\u5c0f\u4e8e\x3cspan class\x3d'num-red'\x3e",cx.Money.format(2E5),"\x3c/span\x3e\u5143\uff0c\u8bf7\u4fee\u6539\u8ba2\u5355\u540e\u91cd\u65b0\u6295\u6ce8"].join("")});$.ajax({type:"post",url:"/pop/hemai",data:{version:version},success:function(a){$("body").prepend(a);cx.PopCom.show(".pop-pay");cx.PopCom.close(".pop-pay",{cb:function(){m=h=n=g=0}});hemaiPop();$(".pop-pay").find(".bet_info").hide()}})}});hemaiPop=function(){function a(){$(".buyMoney").val(g).parents(".form-item-con").find("span em:first").html(k).parents(".form-item-con").find("u").show().find("em").html(Math.floor(100*g/d));$(".guarantee").parents(".form-item-con").find("span em:first").html(d-g);$(".buy_txt").html("\x3cem class\x3d'main-color-s'\x3e"+(g+h)+"\x3c/em\x3e \u5143 \x3cspan\x3e\uff08\u8ba4\u8d2d"+g+"\u5143+\u4fdd\u5e95"+h+"\u5143\uff09\x3c/span\x3e\x3c/span\x3e")}function f(){$(".guarantee").val(h).parents(".form-item-con").find("span em:last").html(Math.floor(100*h/d));$(".buy_txt").html("\x3cem class\x3d'main-color-s'\x3e"+(g+h)+"\x3c/em\x3e \u5143 \x3cspan\x3e\uff08\u8ba4\u8d2d"+g+"\u5143+\u4fdd\u5e95"+h+"\u5143\uff09\x3c/span\x3e\x3c/span\x3e")}var k=5,l=new Date(Date.parse(e.replace(/-/g,"/"))-6E4*hmahead);$(".pop-pay").find(".jzdt").html(l.getFullYear()+"-"+padd(l.getMonth()+1)+"-"+padd(l.getDate())+" "+padd(l.getHours())+":"+padd(l.getMinutes())+":"+padd(l.getSeconds()));$(".betNum").html(c);$(".Multi").html(1);$(".betMoney").html(d);g=Math.ceil(d*k/100);a();f();$(".pop-pay").on("click",".commission li",function(){$(this).parents(".commission").find("li").removeClass("cur");$(this).addClass("cur");n=$(this).data("val");k=5>=n?5:n;buyMoneyTmp=Math.ceil(d*k/100);g=buyMoneyTmp>g?buyMoneyTmp:g;if($(".guaranteeAll").attr("checked")||h>d-g)h=d-g,$(".guaranteeAll").attr("checked","checked"),f();a()});$(".pop-pay").on("blur",".buyMoney",function(){var b=Math.ceil(d*k/100);g=isNaN(parseInt($(this).val(),10))?0:parseInt($(this).val(),10);g=g<b?b:g>d?d:g;if($(".guaranteeAll").attr("checked")||h>d-g)h=d-g,$(".guaranteeAll").attr("checked","checked"),f();a()});$(".pop-pay").on("blur",".guarantee",function(){h=isNaN(parseInt($(this).val(),10))?0:parseInt($(this).val(),10);$(".guaranteeAll").removeAttr("checked");h>=d-g&&(h=d-g,$(".guaranteeAll").attr("checked","checked"));h=0>h?0:h;f()});$(".pop-pay").find(".guaranteeAll").on("click",function(){h=d-g;f()});$(".pop-pay").find("input[name\x3dbmsz]").click(function(){m=$(this).val()});$(".pop-pay").find(".submit").click(function(a){$.cookie("name_ie")?$(this).hasClass("not-bind")?(cx.PopCom.hide($(".pop-pay")),cx.PopAjax.bind()):(a=b.getCastOptions2(),a.isToken=1,cx.castCb(a,{ctype:"create",lotteryId:42,orderType:4,betMoney:a.money,buyMoney:a.buyMoney,guarantee:a.guaranteeAmount,typeCnName:typeHmName})):(cx.PopCom.hide($(".pop-pay")),b.notLogin($(this),a))})};b.getCastOptions=function(){var b=a().split("^");return{ctype:"create",buyPlatform:0,codes:b[0],lid:42,money:d,multi:1,issue:cx.Datetime.getToday(),playType:w[type],betTnum:c,isChase:0,orderType:0,endTime:e,codecc:b[1]}};b.getCastOptions2=function(){var b=a().split("^"),k=new Date(Date.parse(f.replace(/-/g,"/"))+6E4*ahead),l=new Date(Date.parse(e.replace(/-/g,"/"))-6E4*hmahead),k=k.getFullYear()+"-"+padd(k.getMonth()+1)+"-"+padd(k.getDate())+" "+padd(k.getHours())+":"+padd(k.getMinutes())+":"+padd(k.getSeconds()),l=l.getFullYear()+"-"+padd(l.getMonth()+1)+"-"+padd(l.getDate())+" "+padd(l.getHours())+":"+padd(l.getMinutes())+":"+padd(l.getSeconds());return{ctype:"create",buyPlatform:0,codes:b[0],lid:42,money:d,multi:1,issue:cx.Datetime.getToday(),playType:w[type],betTnum:c,isChase:0,orderType:4,codecc:b[1],endTime:l,buyMoney:g,commissionRate:n,guaranteeAmount:h,openStatus:m,openEndtime:k,ForecastBonusv:$(".min-money").html()+"|"+$(".max-money").html()}};b.notLogin=function(a,b){if(a.hasClass("not-login")||!$.cookie("name_ie"))cx.PopAjax.login(),b.stopImmediatePropagation();b.preventDefault()};return b}();$(".bet-side").on("click",".plus",function(){var a=$(this),b=a.closest(".bet-list-item"),c=b.data("index"),d=b.data("type"),b=b.data("val"),f=k.getArray(),e=f[c].multiOptions[d][b],e=Math.min(e+1,1E5);a.prev().children(".number").val(e);f[c].multiOptions[d][b]=e;f[c].changeMulti(d,b,e);a.parent().next().find(".each-bet").empty().html(2*e);a.parent().next().find(".each-reward").empty().html(p(2*f[c].playOptions[d][b]));m.setBetMoney(m.getBetMoney()+2);m.refresh()}).on("click",".minus",function(){var a=$(this),b=a.closest(".bet-list-item"),c=b.data("index"),d=b.data("type"),b=b.data("val"),f=k.getArray(),e=f[c].multiOptions[d][b],e=Math.max(1,e-1);a.next().children(".number").val(e);f[c].multiOptions[d][b]=e;f[c].changeMulti(d,b,e);a.parent().next().find(".each-bet").empty().html(2*e);a.parent().next().find(".each-reward").empty().html(p(2*f[c].playOptions[d][b]));m.setBetMoney(m.getBetMoney()-2);m.refresh()}).on("blur",".number",function(){var a=$(this),b=a.closest(".bet-list-item"),c=b.data("index"),d=b.data("type"),b=b.data("val"),f=k.getArray(),e=f[c].multiOptions[d][b],g=m.getBetMoney(),g=g-2*e,n=$.trim(a.val());(e=parseInt(n,10))?/^\d+$/.test(n)||(e=1):e=1;e=Math.min(1E5,e);a.val(e);f[c].multiOptions[d][b]=e;f[c].changeMulti(d,b,e);a.closest(".multi-modifier").next().find(".each-bet").empty().html(2*e);a.closest(".multi-modifier").next().find(".each-reward").empty().html(p(2*f[c].playOptions[d][b]));m.setBetMoney(g+2*e);m.refresh()}).on("keyup",".number",function(a){var b=$(this),c=b.closest(".bet-list-item"),d=c.data("index"),f=c.data("type"),c=c.data("val"),e=k.getArray(),g=e[d].multiOptions[f][c],n=m.getBetMoney(),h,n=n-2*g;h=$.trim(b.val());g=parseInt(h,10);48<=a.which&&57>=a.which||8==a.which||96<=a.which&&105>=a.which?""==h?g=0:(g||(g=1),g=Math.min(1E5,g),b.val(g)):/^\d+$/.test(h)||(g=1,b.val(g));e[d].multiOptions[f][c]=g;e[d].changeMulti(f,c,g);b.closest(".multi-modifier").next().find(".each-bet").empty().html(2*g);b.closest(".multi-modifier").next().find(".each-reward").empty().html(p(2*e[d].playOptions[f][c]));m.setBetMoney(n+2*g);m.refresh()});$(".not-login").click(function(a){m.notLogin($(this),a)});$.each(["spf","rqspf","bqc","cbf","jqs"],function(a,b){var c="."+b+"-option";$(".jc-box").on("click",c,function(){var a=$(this),c=a.closest("tr");c.hasClass("match")||(c=c.prev());var e=c.data("mid"),g=a.data("val"),n=a.data("odd");q.hasType("1*1")||q.addType("1*1");var h=k.count();if(a.hasClass("selected"))v(a,c,e,b,g),c.data("select",c.data("select")-1);else{a.addClass("selected");c.data("select",c.data("select")+1);var p=cx.MatchCollection.get(e);null===p&&(p=new cx.Match({mid:e,handicap:c.data("let"),val:g,odd:n,wid:c.data("wid"),home:c.data("home"),away:c.data("away"),spfFu:c.data("spf_fu"),rqspfFu:c.data("rqspf_fu"),jqsFu:c.data("jqs_fu"),cbfFu:c.data("cbf_fu"),bqcFu:c.data("bqc_fu"),jzdt:c.data("jzdt"),cancel:c.data("cancel"),old:c.data("old")}),cx.MatchCollection.add(e,p));p.addOption(b,g,n);p.addDom(b,g,a);15<h&&(new cx.Alert({content:"\u53ea\u652f\u630115\u573a\u4ee5\u5185\u7684\u6295\u6ce8\uff01"}),v(a,c,e,b,g))}var l=0;$(".jc-option a.selected").each(function(){$(this).parents("tr").hasClass("hasmatched")&&(l=1)});$(".attach-options a.selected").each(function(){$(this).parents("tr").hasClass("hasmatched")&&(l=1)});1==l?($("#optimize").addClass("hidden"),$(".btn-s").addClass("hidden"),$(".agree").addClass("hidden"),$(".jjyc-imgs").removeClass("hidden")):($("#optimize").removeClass("hidden"),$(".btn-s").removeClass("hidden"),$(".agree").removeClass("hidden"),$(".jjyc-imgs").addClass("hidden"),$(".fcs").removeClass("hidden"),$(".oldfcs").addClass("hidden"));q.refreshGGType(h);m.refresh()})});$(".table-option-list").on("click",".list-item",function(){var a=$("#selectTime"),b=$(this).data("field");$(".time").children(".time-num").each(function(){var c=$(this),d=c.closest(".match").data(b).split(" ")[1].split(":");a.empty().html(function(){return["dt"==b?"\u6bd4\u8d5b":"\u505c\u552e",'\u65f6\u95f4\x3ci class\x3d"table-option-arrow"\x3e\x3c/i\x3e'].join("")});c.html([d[0],d[1]].join(":"))})});$(".jc-box").on("click",".jc-table-action",function(){var a=$(this),b=a.closest(".match"),c=b.next();""==c.html()?c.empty().load("ajax/attachOption",{playType:type,mid:b.data("mid")},function(){a.closest(".match").nextUntil(".match").filter(".attach-options").addClass("opened").show().find("td").show()}):a.closest(".match").nextUntil(".match").filter(".attach-options").addClass("opened").show().find("td").show()});$(".jc-box").on("click",".jc-table-action",function(){var a=$(this),b=a.closest(".attach-options").prev(),c=0,d=k.get(b.data("mid"));null!=d&&$.each(["cbf","jqs","bqc"],function(a,b){c+=d.playOptionsCount[b]});b.find(".jc-table-action").empty().html(function(){return 0<c?['\x3ca href\x3d"javascript:;" class\x3d"selected"\x3e\u5df2\u9009',c,'\u9879\x3ci class\x3d"arrow"\x3e\x3c/i\x3e\x3c/a\x3e'].join(""):'\x3ca href\x3d"javascript:;"\x3e\u66f4\u591a\x3ci class\x3d"arrow"\x3e\x3c/i\x3e\x3c/a\x3e'}).parent().addClass(function(){return 0<c?"selected":""});a.parents(".attach-options").removeClass("opened").find("td").hide()});$("body").on("click",".jc-box-action",function(){var a=$(this);a.html(function(){return a.closest(".jc-box").hasClass("jc-box-hide")?"\u9690\u85cf":"\u663e\u793a"}).closest(".jc-box").toggleClass("jc-box-hide")});var z=function(){return{show:function(){var a=k.getArray(),b=a.length;$(".btn-betting").toggleClass("btn-disabled",!saleStatus);$("#no-matches").toggle(!b);$("#optimize").toggle(0<b);var c=$(".bet-data");c.empty().html(function(){var b=[],c=[];$.each(a,function(a,d){var e=['\x3cdiv data-mid\x3d"',d.options.mid,'"\x3e'];e.push('\x3cdiv class\x3d"bet-data-hd"\x3e\x3ca href\x3d"javascript:;" class\x3d"fr btn-delete" data-index\x3d"',a,'"\x3e\u5220\u9664\x3c/a\x3e\x3cspan class\x3d"fr"\x3e',d.options.wid,"\x3c/span\x3e\x3cb\x3e",d.options.home,"\x3c/b\x3e VS \x3cb\x3e",d.options.away,"\x3c/b\x3e\x3c/div\x3e",'\x3cdiv class\x3d"bet-data-bd"\x3e\x3cul\x3e');$.each(d.originalPlayOptions,function(b,c){$.each($.map(c,function(a,b){return b}).sort(function(a,c){return x[b][a]-x[b][c]}),function(f,g){var h=c[g],k="\u9884\u8ba1";1==d.old&&(k="");e.push('\x3cli class\x3d"bet-list-item" data-index\x3d"',a,'" data-type\x3d"',b,'" data-val\x3d"',g,'"\x3e','\x3cp class\x3d"clearfix"\x3e\x3cspan class\x3d"bet-resulte"\x3e',y[b][g],"\x3c/span\x3e\u8d54\u7387",h.toFixed(2),"\x3c/p\x3e",'\x3cdiv class\x3d"multi-modifier"\x3e','\x3ca href\x3d"javascript:;" class\x3d"minus selem"\x3e-\x3c/a\x3e\x3clabel\x3e\x3cinput class\x3d"multi number" type\x3d"text"','value\x3d" ',d.multiOptions[b][g],'"','autocomplete\x3d"off"\x3e\x3c/label\x3e\x3ca href\x3d"javascript:;" class\x3d"plus selem" data-max\x3d"',1E5,'"\x3e+\x3c/a\x3e',"\x3c/div\x3e",'\x3cp\x3e\x3cspan class\x3d"mr20"\x3e\u6295\x3cb class\x3d"each-bet"\x3e',2*d.multiOptions[b][g],"\x3c/b\x3e\u5143\x3c/span\x3e\x3cspan\x3e"+k+'\u5956\u91d1\x3cb class\x3d"each-reward"\x3e',p(2*h*d.multiOptions[b][g]),"\x3c/b\x3e\u5143\x3c/span\x3e\x3c/p\x3e",'\x3ca href\x3d"javascript:;" class\x3d"btn-close"\x3e\x3ci class\x3d"icon-font"\x3e\x26#xe603;\x3c/i\x3e\x3c/a\x3e',"\x3c/li\x3e")})});e.push("\x3c/ul\x3e\x3c/div\x3e","\x3c/div\x3e");b[d.options.mid]=e.join("");c.push(d.options.mid)});c.sort();return $.map(c,function(a){return b[a]}).join("")}).find(".btn-close").click(function(){var b=$(this).parent();a[b.data("index")].domOptions[b.data("type")][b.data("val")].trigger("click")}).end().find(".btn-delete").click(function(){$.each(a[$(this).data("index")].domOptions,function(a,b){$.each(b,function(a,b){b.trigger("click")})})});$(".btn-clean").click(function(){c.find(".btn-close").trigger("click")})}}}(),r=$(".league-filter");r.mouseover(function(){$(this).addClass("league-filter-hover")}).mouseout(function(){$(this).removeClass("league-filter-hover")});$(".table-option").mouseover(function(){$(this).addClass("table-option-hover")}).mouseout(function(){$(this).removeClass("table-option-hover")});r.on("click",".league",function(){var a=$(this),b=a.val();$(".jc-box").each(function(c,d){var f=$(d),e=f.data("league"),g=f.next();e==b&&($(".attach-options .jc-table-action").trigger("click"),f.toggle().find("td").toggle(),a.is(":checked")||g.hide().removeClass("opened").find("td").hide())})});$(".select-five").click(function(){$(".league").each(function(){var a=$(this);-1==$.inArray(parseInt(a.val(),10),fiveLeague)?a.is(":checked")&&a.trigger("click"):a.is(":checked")||a.trigger("click")})});$(".select-anti").click(function(){$(".attach-options .jc-table-action").trigger("click");$(".league").trigger("click");$(".match").next().hide().find("td").hide()});$(".select-all").click(function(){$(".league").each(function(a,b){$(b).is(":checked")||$(b).trigger("click")})});$(".select-none").click(function(){$(".league").each(function(a,b){$(b).is(":checked")&&$(b).trigger("click")})})});function padd(p){return("0"+p).slice(-2)};