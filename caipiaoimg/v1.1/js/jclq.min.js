$(function(){function q(a){return 0==a?"0.00":cx.Math.round2(cx.Math.multiply(a,100))/100}function r(a,c,d,e,b){a.removeClass("selected");var g=cx.MatchCollection.get(d);g.removeOption(e,b);g.splitMatch();a=["sfc"];if(-1<$.inArray(e,a)){var f=0;null!=g&&$.each(a,function(){f+=g.playOptionsCount[this]});a=c.data("sfc_fu")?'\x3cdiv class\x3d"mod-sup"\x3e\x3ci class\x3d"mod-sup-bg"\x3e\x3c/i\x3e\x3cu\x3e\u5355\x3c/u\x3e\x3c/div\x3e':"";0==f?c.find(".open-attach").removeClass("selected").empty().html('\x3cdiv class\x3d"jc-table-action"\x3e\x3ca href\x3d"javascript:;"\x3e\u80dc\u5206\u5dee\x3ci class\x3d"arrow"\x3e\x3c/i\x3e'+a+"\x3c/a\x3e\x3c/div\x3e"):c.find(".open-attach").empty().html('\x3cdiv class\x3d"jc-table-action selected"\x3e\x3ca href\x3d"javascript:;" class\x3d"selected"\x3e\u5df2\u9009'+f+'\u9879\x3ci class\x3d"arrow"\x3e\x3c/i\x3e'+a+"\x3c/a\x3e\x3c/div\x3e")}g.removeDom(e,b)}var x={hh:0,sf:1,rfsf:2,sfc:3,dxf:4},v={sf:{3:"\u4e3b\u80dc",0:"\u5ba2\u80dc"},rfsf:{3:"\u4e3b\u80dc\u3010\u8ba9\u3011",0:"\u5ba2\u80dc\u3010\u8ba9\u3011"},sfc:{"01":"\u4e3b\u80dc1-5\u5206","02":"\u4e3b\u80dc6-10\u5206","03":"\u4e3b\u80dc11-15\u5206","04":"\u4e3b\u80dc16-20\u5206","05":"\u4e3b\u80dc21-25\u5206","06":"\u4e3b\u80dc26+\u5206",11:"\u5ba2\u80dc1-5\u5206",12:"\u5ba2\u80dc6-10\u5206",13:"\u5ba2\u80dc11-15\u5206",14:"\u5ba2\u80dc16-20\u5206",15:"\u5ba2\u80dc21-25\u5206",16:"\u5ba2\u80dc26+\u5206"},dxf:{3:"\u5927\u5206",0:"\u5c0f\u5206"}},p=cx.Match=function(a){this.options=a;this.handicap=parseFloat(this.options.handicap,10);this.bfCheckMap=null;this.max=0;this.min=Number.POSITIVE_INFINITY;this.maxOptions={};this.minOptions={};this.optionCount=0;this.splitMatchs={};this.playOptions={sf:{},rfsf:{},sfc:{},dxf:{}};this.playOptionsCount={sf:0,rfsf:0,sfc:0,dxf:0};this.domOptions={sf:{},rfsf:{},sfc:{},dxf:{}}};p.prototype.addDom=function(a,c,d){this.domOptions[a][c]=d};p.prototype.addOption=function(a,c,d){this.playOptions[a][c]=parseFloat(d);this.refreshOdds();this.optionCount+=1;this.playOptionsCount[a]+=1};p.prototype.removeDom=function(a,c){delete this.domOptions[a][c]};p.prototype.removeOption=function(a,c){delete this.playOptions[a][c];this.refreshOdds();--this.optionCount;--this.playOptionsCount[a]};p.prototype.refreshOdds=function(){this.max=0;this.min=Number.POSITIVE_INFINITY;this.maxOptions={};this.minoptions={};var a=w.getAllBf();null===this.bfCheckMap&&(this.bfCheckMap=w.getBfCheckMap(this.handicap));var c,d,e,b,g;for(g=0;g<a.length;++g)c=a[g].name,d=w.validateOptByBf(this.bfCheckMap,this.playOptions,c),$.isEmptyObject(d)||(b=e=0,$.each(d,function(a,c){if("DXF"==a.toUpperCase()){var f=0,g=Number.POSITIVE_INFINITY;$.each(c,function(b,e){e>f&&(f=e,d[a]={},d[a][b]=e);e<g&&(g=e)});e+=f;if(g<b||0==b)b=g}else $.each(c,function(a,c){e+=c;if(c<b||0==b)b=c})}),e>this.max&&(this.max=e,this.maxOptions=d),b<this.min&&(this.min=b,this.minOptions=d))};p.prototype.getsplitMatch=function(){return this.splitMatchs};p.prototype.splitMatch=function(){var a=this,c=[];$.each(this.playOptionsCount,function(d,e){if(0<e){var b=new cx.Match({mid:a.options.mid,handicap:a.options.handicap,wid:a.options.wid,home:a.options.home,away:a.options.away,spfFu:a.options.spfFu,rqspfFu:a.options.rqspfFu,jqsFu:a.options.jqsFu,cbfFu:a.options.cbfFu,bqcFu:a.options.bqcFu,jzdt:a.options.jzdt});$.each(a.playOptions[d],function(a,e){b.optionCount+=1});d in a.maxOptions?(b.maxOptions=a.maxOptions,$.each(a.maxOptions[d],function(a,e){b.max=e})):(b.maxOptions={},b.max=0);d in a.minOptions?(b.minOptions=a.minOptions,$.each(a.minOptions[d],function(a,e){b.min=e})):(b.minOptions={},b.min=0);b.playType=d;c.push(b)}});this.splitMatchs=c};var l=cx.MatchCollection=function(){var a={},c={},d={};a.add=function(a,b){a in c||(c[a]=b)};a.remove=function(a){a in c&&delete c[a]};a.removemulti=function(a){$.each(d,function(b,e){-1<b.indexOf(a)&&delete d[b]})};a.count=function(){var a=0;$.each(c,function(b,e){0<e.optionCount&&(a+=1)});return a};a.has=function(a){return a in c};a.get=function(a){return a in c?c[a]:null};a.getAll=function(){return c};a.getAllMulti=function(){return d};a.getArray=function(){var a=$.map(c,function(a){if(0<a.optionCount)return a});a.sort(matchsCompare("mid"));return a};a.empty=function(){return c={}};a.setsplitArray=function(a){var b=0,e={};$.each(a,function(a,d){var f={},g=c[d].getsplitMatch();$.each(g,function(a,c){0==b?f[d+c.playType]=[c]:$.each(e,function(a,b){f[a+"_"+d+c.playType]=b.concat([c])})});e=f;b++});d[a.join("_")]=e};a.getsplitArray=function(c){var b=c.join("_");void 0===d[b]&&a.setsplitArray(c);return d[b]};return a}(),w=cx.PlayOptions=function(){var a={},c=[];(function(){for(var a=[1,-1],e=[{min:1,max:5},{min:6,max:10},{min:11,max:15},{min:16,max:20},{min:21,max:25},{min:26,max:1E5}],b=3,g=0;g<a.length;++g){0<g&&(b=0);for(var f=0;f<e.length;++f)c.push({name:g+""+(f+1),dir:a[g],sf:b,min:cx.Math.multiply(e[f].min,a[g]),max:cx.Math.multiply(e[f].max,a[g])})}})();a.getBfCheckMap=function(a){a=parseFloat(a,10);for(var e={},b,d,f,n=0;n<c.length;++n)b=["3","0"],f=0,d=c[n],0<d.dir?d.max>-a&&(f=3):-d.max<a&&(f=3),e[d.name]={sf:[d.sf+""],rfsf:[f+""],dxf:b,sfc:[d.name]};return e};a.getAllBf=function(){return c};a.validateOptByBf=function(a,c,b){var d=a[b],e={};$.each(c,function(a,b){$.each(b,function(b,c){-1<$.inArray(b,d[a])&&(a in e||(e[a]={}),e[a][b]=c)})});return e};return a}(),k=cx.GGTypes=function(){var a={},c=$(".gg-type:not(.gg-type-more)"),d=[],e={"1*1":[1],"2*1":[2],"3*1":[3],"3*3":{3:[2]},"3*4":{3:[2,3]},"4*1":[4],"4*4":{4:[3]},"4*5":{4:[3,4]},"4*6":{4:[2]},"4*11":{4:[2,3,4]},"5*1":[5],"5*5":{5:[4]},"5*6":{5:[4,5]},"5*10":{5:[2]},"5*16":{5:[3,4,5]},"5*20":{5:[2,3]},"5*26":{5:[2,3,4,5]},"6*1":[6],"6*6":{6:[5]},"6*7":{6:[5,6]},"6*15":{6:[2]},"6*20":{6:[3]},"6*22":{6:[4,5,6]},"6*35":{6:[2,3]},"6*42":{6:[3,4,5,6]},"6*50":{6:[2,3,4]},"6*57":{6:[2,3,4,5,6]},"7*1":[7],"7*7":{7:[6]},"7*8":{7:[6,7]},"7*21":{7:[5]},"7*35":{7:[4]},"7*120":{7:[2,3,4,5,6,7]},"8*1":[8],"8*8":{8:[7]},"8*9":{8:[7,8]},"8*28":{8:[6]},"8*56":{8:[5]},"8*70":{8:[4]},"8*247":{8:[2,3,4,5,6,7,8]}};a.addType=function(a){d.push(a);d.sort()};a.removeType=function(a){a=$.inArray(a,d);-1<a&&d.splice(a,1)};a.getOptions=function(){var a=[],c={},f,n;for(n=0;n<d.length;++n)f=d[n],1<parseInt(f.replace(/\d\*/,""))?$.each(e[f],function(a,b){a in c||(c[a]=[]);c[a].push(b)}):e[f]in a||(a=a.concat(e[f]));return[a,c]};a.hasType=function(a){return-1<$.inArray(a,d)};a.getTypes=function(){return d};a.refreshGGType=function(b){for(var e=l.getArray(),f=0;f<e.length;++f)0<e[f].playOptionsCount.sfc&&(b=Math.min(b,4));$(".gg-type-more").hide();1<=b?(c.each(function(a,c){var e=$(this).data("type").split("*");e[0]>b&&$(this).hide().removeClass("selected");e[0]<=b&&$(this).show()}),2<b&&$(".gg-type-more").show(),f=$(".more-type .more-type-pop").find(".selected").length,0==f?($(".more-type").find(".gg-type-more").removeClass("selected active").html("\u66f4\u591a\u8fc7\u5173 "),$(".more-type-pop").hide()):$(".more-type").find(".gg-type-more").html("\u66f4\u591a\u8fc7\u5173 "+f)):c.hide().removeClass("selected");if(1>b)d=[];else for(var f=0,n=d.length;f<n;++f)d[f]&&d[f].split("*")[0]>b&&(a.removeType(d[f]),f--,n--);$.each(e,function(a,b){$.each(b.playOptions,function(a){if(b.playOptionsCount[a]&&!b.options[a+"Fu"])return!1})});e.length&&!d.length&&c.eq(1).trigger("click")};c.click(function(){var b=$(this),e=b.data("type");if(b.hasClass("selected"))b.removeClass("selected"),a.removeType(e);else{var f=l.getArray();if(b.hasClass("single")){for(var n=["sf","rfsf","dxf","sfc"],h=0;h<f.length;++h)for(var k=f[h],m=0;m<n.length;++m){var p=n[m];k.options[p+"Fu"]||$.each(k.domOptions[p],function(a,b){b.trigger("click")})}b.siblings().removeClass("selected");d=[];b.show()}else b.siblings(".single").removeClass("selected"),a.removeType("1*1");f=l.getArray();if(0<f.length){var q=1<b.data("type").replace(/\d\*/,"");c.filter(".selected").each(function(b,c){if(q||1<$(this).data("type").replace(/\d\*/,""))$(this).removeClass("selected"),a.removeType($(this).data("type"))});q?$("#optimize").html('\x3cspan class\x3d"seleView bubble-tip" tiptext\x3d"\u60a8\u597d\uff0c\u5956\u91d1\u4f18\u5316\u53ea\u652f\u6301N\u4e321\u7684\u8fc7\u5173\u65b9\u5f0f"\x3e\u5956\u91d1\u4f18\u5316\x3c/span\x3e'):$("#optimize").html('\x3ca class\x3d"seleView start-detail main-color-s"\x3e\u5956\u91d1\u4f18\u5316\x3c/a\x3e');b.addClass("selected");a.addType(e)}}b=$(".more-type .more-type-pop").find(".selected").length;0==b?$(".more-type").find(".gg-type-more").removeClass("selected").html("\u66f4\u591a\u8fc7\u5173 "):$(".more-type").find(".gg-type-more").html("\u66f4\u591a\u8fc7\u5173 "+b);t.refresh()});return a}(),z=cx.Combine=function(a){this.matches=a;this.len=a.length;this.allOld=this.combineCount=this.min=this.max=1;for(var c=0;c<a.length;++c)1==a[c].options.cancel&&(a[c].max=a[c].optionCount,a[c].min=a[c].optionCount),this.max=cx.Math.multiply(this.max,a[c].max),this.min=cx.Math.multiply(this.min,a[c].min),0==this.min&&(this.min=this.max),this.allOld*=a[c].options.old,this.combineCount=cx.Math.multiply(this.combineCount,a[c].optionCount)},m=function(){var a={},c={},d={};this.allOdd=1;this.oldcombines={};a.reset=function(){c={};d={};this.oldcombines={};this.allOdd=1};a.addByLen=function(e,b,d){b in c||(c[b]={});e.sort(function(a,b){return a.max-b.max});var f=[].concat(e);f.sort(function(a,b){return a.min-b.min});c[b].max=e;c[b].min=f;var g=0;$(e).each(function(c,e){g+=e.combineCount;a.caloldmax(e,b)});$.isFunction(d)&&d(g)};a.addMultiByLen=function(a,b,c){b in d||(d[b]={});"max"in d[b]||(d[b].max={});"min"in d[b]||(d[b].min={});$.each(a,function(a,c){c.splitid in d[b].max&&c.splitid in d[b].min?d[b].max[c.splitid].splitcount++:(d[b].max[c.splitid]=c,d[b].min[c.splitid]=c)});if($.isFunction(c)){var e=0;$(a).each(function(a,b){e+=b.combineCount});c(e)}};a.caloldmax=function(a,b){this.allOdd*=a.allOld;var c=1;1==a.allOld?(b in this.oldcombines||(this.oldcombines[b]=0),this.oldcombines[b]=a.max+this.oldcombines[b]):$(a.matches).each(function(a,b){if(2==b.playOptionsCount.sf||2==b.playOptionsCount.dxf||2==b.playOptionsCount.rfsf||12==b.playOptionsCount.sfc)c*=b.min});1<c&&(this.oldcombines[b]=a.min+this.oldcombines[b])};a.getBySlice=function(a,b,d,f){a=c[a][b];f||(f=a.length);return a.slice(d,f)};a.getByMultiSlice=function(a,b){return d[a][b]};return a}(),t=cx.CastData=function(){function a(){for(var a=l.getArray(),b=k.getTypes(),c="HH|",b=b.join(","),d,e,f,g,h,n=[],A=[],p=0;p<a.length;++p)for(f in e=a[p],A.push(e.options.mid),e.playOptions)if(!$.isEmptyObject(e.playOptions[f])){h=[];d=f.toUpperCase()+"\x3e"+e.options.mid+"\x3d";for(g in e.playOptions[f]){var m=""+g;"rfsf"==f&&(m+="{"+(0<e.handicap?"+"+e.handicap:e.handicap)+"}");m+="("+e.playOptions[f][g]+")";h.push(m)}d+=h.join("/");"dxf"==f&&(d+="{"+e.options.prescore+"}");n.push(d)}return c+=n.join(",")+"|"+b+"@"+A.join(" ")}var c={},d=0,e=0,b="1970-01-01 00:00:00",g="3000-12-31 23:59:59",f=0,n=0,h=0,p=0;optimization={};multiModifier=new cx.AdderSubtractor(".multi-modifier");multiModifier.setCb(function(){e=cx.Math.multiply(cx.Math.multiply(d,this.value),2);c.renderBet();c.renderMinMaxMoney()});var t=$(".count-matches"),y=$(".min-money"),r=$(".max-money, .old-max-money"),v=$(".bet-num"),w=$(".bet-money");c.getBetMoney=function(){return e};c.renderMinMaxMoney=function(){var a=0,b,c,e=$("#optimize"),d,f,g;c=k.getOptions()[0].length;g=JSON.stringify(k.getOptions()[1]);0<c&&(a=k.getOptions()[0][0]);b=l.count();if(1>b||1>c&&"{}"===g||1==b&&!k.hasType("1*1"))y.html("0.00"),r.html("0.00"),e.addClass("panel-hide");else{e.toggleClass("panel-hide",1>c&&"{}"===g);c=multiModifier.getValue();f=d=0;multiminOdd=Number.POSITIVE_INFINITY;b in optimization[0]&&($(optimization[0][b].max).each(function(a,b){d+=b.max}),$(optimization[0][a].min).each(function(a,b){f+=b.min}),1!=m.allOdd?(m.oldcombines[a]&&0!=m.oldcombines[a]&&(f=m.oldcombines[a]),$(".ycjj").removeClass("hidden"),$(".fycjj").addClass("hidden")):($(".ycjj").addClass("hidden"),$(".fycjj").removeClass("hidden")));if("{}"!==g){var h=Number.POSITIVE_INFINITY;$.each(k.getOptions()[1],function(a,b){$.each(b,function(a,b){$.each(b,function(a,b){h=Math.min(b,h)})})});$.each(optimization[1],function(a,b){"max"in b&&$.each(b.max,function(b,c){d+=c.max*c.splitcount;var e=c.min*c.splitcount;h==a&&0<e&&e<multiminOdd&&(multiminOdd=e)})})}multiminOdd==Number.POSITIVE_INFINITY&&(multiminOdd=0);y.html(cx.Math.multiply(q(cx.Math.multiply(f+multiminOdd,2)),c));r.html(cx.Math.multiply(q(cx.Math.multiply(d,2)),c))}};c.setTime=function(){b="1970-01-01 00:00:00";g="3000-12-31 23:59:59";$.each(l.getArray(),function(a,c){c.options.jzdt<g&&(g=c.options.jzdt);c.options.jzdt>b&&(b=c.options.jzdt)})};c.calcOptimization=function(){var a=k.getOptions()[0],b=k.getOptions()[1],c,e,d;c=l.count();l.getAllMulti();var f,g={},h={};if(a.length)for(;1<=c;--c)for(e=0;e<a.length;++e)d=a[e],d>c||(f=cx.Math.combine(c,d),c in g||(g[c]={}),g[c].max="max"in g[c]?g[c].max.concat(m.getBySlice(d,"max",-f)):m.getBySlice(d,"max",-f),g[c].min="min"in g[c]?g[c].min.concat(m.getBySlice(d,"min",0,f)):m.getBySlice(d,"min",0,f));"{}"!==JSON.stringify(b)&&$.each(b,function(a,b){$.each(b,function(a,b){$.each(b,function(a,b){"opt"in h||(h[b]={},h[b].max=m.getByMultiSlice(b,"max"),h[b].min=m.getByMultiSlice(b,"min"))})})});return[g,h]};c.renderBet=function(){v.html(d);w.html(e)};c.calcCombines=function(){m.reset();d=0;if(k.getOptions()[0].length){var a=cx.Math.combineList(l.getArray(),k.getOptions()[0],function(a){return new z(a)});$.each(a,function(a,b){m.addByLen(b,a,function(a){d+=a})})}if("{}"!==JSON.stringify(k.getOptions()[1])){var b=[],f="",g={},h={};$.each(k.getOptions()[1],function(a,c){cx.Math.combineList(l.getArray(),[a],function(a){b=[];$.each(a,function(a,c){b.push(c.options.mid)});f=b.join("_");h[f]={};g=l.getsplitArray(b);$.each(g,function(a,b){a in h[f]||(h[f][a]={});$.each(c,function(c,e){var d=cx.Math.combineList(b,e,function(a){newcombine=new z(a);newcombine.setsplitid();return newcombine});$.each(d,function(b,c){b in h[f][a]||(h[f][a][b]=[]);h[f][a][b]=h[f][a][b].concat(c)})})})})});$.each(h,function(a,b){$.each(b,function(a,b){$.each(b,function(a,b){m.addMultiByLen(b,a,function(a){d+=a})})})})}e=cx.Math.multiply(cx.Math.multiply(d,multiModifier.getValue()),2);c.renderBet()};c.refresh=function(){c.calcCombines();var a=l.count();t.html(a);optimization=c.calcOptimization();c.renderMinMaxMoney();c.setTime()};var u=$(".cast-panel");u.find(".submit").click(function(a){var b=$(this);b.addClass("needTigger");b.hasClass("not-login")||!$.cookie("name_ie")?c.notLogin(b,a):(a=u.find(".ipt_checkbox#agreenment"),a.get(0)&&!a.is(":checked")?new cx.Alert({content:"\u8bf7\u9605\u8bfb\u5e76\u540c\u610f\u300a\u7528\u6237\u59d4\u6258\u6295\u6ce8\u534f\u8bae\u300b"}):b.hasClass("not-bind")||(1>l.count()?new cx.Alert({content:"\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u573a\u6bd4\u8d5b"}):1!=l.count()||-1<$.inArray("1*1",k.getTypes())?0>=k.getTypes().length?new cx.Alert({content:"\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u79cd\u8fc7\u5173\u65b9\u5f0f"}):(b=c.getCastOptions1(),2E5<b.money?new cx.Alert({content:["\x3ci class\x3d'icon-font'\x3e\x26#xe611;\x3c/i\x3e\u8ba2\u5355\u603b\u989d\u9700\u5c0f\u4e8e\x3cspan class\x3d'num-red'\x3e",cx.Money.format(2E5),"\x3c/span\x3e\u5143\uff0c\u8bf7\u4fee\u6539\u8ba2\u5355\u540e\u91cd\u65b0\u6295\u6ce8"].join("")}):(b.isToken=1,cx.castCb(b,{ctype:"create",lotteryId:42,orderType:0,betMoney:b.money,typeCnName:typeCnName}))):new cx.Alert({content:"\u8bf7\u81f3\u5c11\u9009\u62e9\u4e24\u573a\u6bd4\u8d5b"})))});u.find(".btn-hemai:not([class*\x3d'btn-disabled'])").click(function(a){$(this).addClass("needTigger");if($(this).hasClass("not-login")||!$.cookie("name_ie"))c.notLogin($(this),a);else if(!$(this).hasClass("not-bind")){a=$(".pop-pay").find(".ipt_checkbox#hmagreenment");if(a.get(0)&&!a.is(":checked"))return void new cx.Alert({content:"\u8bf7\u9605\u8bfb\u5e76\u540c\u610f\u300a\u7528\u6237\u59d4\u6258\u6295\u6ce8\u534f\u8bae\u300b"});if(1>l.count())return void new cx.Alert({content:"\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u573a\u6bd4\u8d5b"});if(1==l.count()&&!(-1<$.inArray("1*1",k.getTypes())))return void new cx.Alert({content:"\u8bf7\u81f3\u5c11\u9009\u62e9\u4e24\u573a\u6bd4\u8d5b"});if(1>k.getTypes().length)return void new cx.Alert({content:"\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u79cd\u8fc7\u5173\u65b9\u5f0f"});if(2E5<e)return void new cx.Alert({content:["\x3ci class\x3d'icon-font'\x3e\x26#xe611;\x3c/i\x3e\u8ba2\u5355\u603b\u989d\u9700\u5c0f\u4e8e\x3cspan class\x3d'num-red'\x3e",cx.Money.format(2E5),"\x3c/span\x3e\u5143\uff0c\u8bf7\u4fee\u6539\u8ba2\u5355\u540e\u91cd\u65b0\u6295\u6ce8"].join("")});$.ajax({type:"post",url:"/pop/hemai",data:{version:version},success:function(a){$("body").prepend(a);cx.PopCom.show(".pop-pay");cx.PopCom.close(".pop-pay",{cb:function(){p=h=n=f=0}});hemaiPop()}})}});hemaiPop=function(){function a(){$(".buyMoney").val(f).parents(".form-item-con").find("span em:first").html(l).parents(".form-item-con").find("u").show().find("em").html(Math.floor(100*f/e));$(".guarantee").parents(".form-item-con").find("span em:first").html(e-f);$(".buy_txt").html("\x3cem class\x3d'main-color-s'\x3e"+(f+h)+"\x3c/em\x3e \u5143 \x3cspan\x3e\uff08\u8ba4\u8d2d"+f+"\u5143+\u4fdd\u5e95"+h+"\u5143\uff09\x3c/span\x3e\x3c/span\x3e")}function b(){$(".guarantee").val(h).parents(".form-item-con").find("span em:last").html(Math.floor(100*h/e));$(".buy_txt").html("\x3cem class\x3d'main-color-s'\x3e"+(f+h)+"\x3c/em\x3e \u5143 \x3cspan\x3e\uff08\u8ba4\u8d2d"+f+"\u5143+\u4fdd\u5e95"+h+"\u5143\uff09\x3c/span\x3e\x3c/span\x3e")}var l=5,k=new Date(Date.parse(g.replace(/-/g,"/"))-6E4*hmahead);$(".jzdt").html(k.getFullYear()+"-"+padd(k.getMonth()+1)+"-"+padd(k.getDate())+" "+padd(k.getHours())+":"+padd(k.getMinutes())+":"+padd(k.getSeconds()));$(".betNum").html(d);$(".Multi").html(multiModifier.getValue());$(".betMoney").html(e);f=Math.ceil(e*l/100);a();b();$(".pop-pay").on("click",".commission li",function(){$(this).parents(".commission").find("li").removeClass("cur");$(this).addClass("cur");n=$(this).data("val");l=5>=n?5:n;buyMoneyTmp=Math.ceil(e*l/100);f=buyMoneyTmp>f?buyMoneyTmp:f;if($(".guaranteeAll").attr("checked")||h>e-f)h=e-f,$(".guaranteeAll").attr("checked","checked"),b();a()});$(".pop-pay").on("blur",".buyMoney",function(){var c=Math.ceil(e*l/100);f=isNaN(parseInt($(this).val(),10))?0:parseInt($(this).val(),10);f=f<c?c:f>e?e:f;if($(".guaranteeAll").attr("checked")||h>e-f)h=e-f,$(".guaranteeAll").attr("checked","checked"),b();a()});$(".pop-pay").on("blur",".guarantee",function(){h=isNaN(parseInt($(this).val(),10))?0:parseInt($(this).val(),10);$(".guaranteeAll").removeAttr("checked");h>=e-f&&(h=e-f,$(".guaranteeAll").attr("checked","checked"));h=0>h?0:h;b()});$(".pop-pay").find(".guaranteeAll").on("click",function(){h=e-f;b()});$(".pop-pay").find("input[name\x3dbmsz]").click(function(){p=$(this).val()});$(".pop-pay").find(".submit").click(function(a){$.cookie("name_ie")?$(this).hasClass("not-bind")?(cx.PopCom.hide($(".pop-pay")),cx.PopAjax.bind()):(a=c.getCastOptions2(),a.isToken=1,cx.castCb(a,{ctype:"create",lotteryId:42,orderType:4,betMoney:a.money,buyMoney:a.buyMoney,guarantee:a.guaranteeAmount,typeCnName:typeHmName})):(cx.PopCom.hide($(".pop-pay")),c.notLogin($(this),a))})};c.getCastOptions1=function(){var b=a().split("@"),c=b[1],b=b[0];return{ctype:"create",buyPlatform:0,codes:b,lid:43,money:e,multi:multiModifier.getValue(),issue:cx.Datetime.getToday(),playType:x[type],betTnum:d,isChase:0,orderType:0,endTime:g,codecc:c}};c.getCastOptions2=function(){var c=a().split("@"),l=c[1],k=new Date(Date.parse(b.replace(/-/g,"/"))+6E4*ahead),m=new Date(Date.parse(g.replace(/-/g,"/"))-6E4*hmahead),c=c[0],k=k.getFullYear()+"-"+padd(k.getMonth()+1)+"-"+padd(k.getDate())+" "+padd(k.getHours())+":"+padd(k.getMinutes())+":"+padd(k.getSeconds()),m=m.getFullYear()+"-"+padd(m.getMonth()+1)+"-"+padd(m.getDate())+" "+padd(m.getHours())+":"+padd(m.getMinutes())+":"+padd(m.getSeconds());return{ctype:"create",buyPlatform:0,codes:c,lid:43,money:e,multi:multiModifier.getValue(),issue:cx.Datetime.getToday(),playType:x[type],betTnum:d,isChase:0,orderType:4,codecc:l,endTime:m,buyMoney:f,commissionRate:n,guaranteeAmount:h,openStatus:p,openEndtime:k,ForecastBonusv:$(".ycjj p em:first").html()+"|"+$(".ycjj p em:last").html()}};c.notLogin=function(a,b){if(a.hasClass("not-login")||!$.cookie("name_ie"))cx.PopAjax.login(),b.stopImmediatePropagation();b.preventDefault()};return c}();cx.Combine.prototype.setsplitid=function(){var a=[];$.each(this.matches,function(c,d){a.push(d.options.mid+d.playType)});this.splitid=a.join("_");this.splitcount=1};$.each(["sf","rfsf","dxf","sfc"],function(a,c){var d="."+c+"-option";$(".jc-box").on("click",d,function(){var a=$(this),b=a.closest("tr");b.hasClass("match")||(b=b.prev());var d=b.data("mid"),f=a.data("val"),n=a.data("odd");if(a.hasClass("selected"))b.data("select",b.data("select")-1),r(a,b,d,c,f);else{b.data("select",b.data("select")+1);a.addClass("selected");var h=cx.MatchCollection.get(d);null===h&&(h=new cx.Match({mid:d,home:b.data("home"),away:b.data("away"),handicap:b.data("let"),wid:b.data("wid"),sfFu:b.data("sf_fu"),rfsfFu:b.data("rfsf_fu"),sfcFu:b.data("sfc_fu"),dxfFu:b.data("dxf_fu"),jzdt:b.data("jzdt"),prescore:b.data("prescore"),cancel:b.data("cancel"),old:b.data("old")}),cx.MatchCollection.add(d,h));h.addOption(c,f,n);h.addDom(c,f,a);h.splitMatch()}cx.MatchCollection.removemulti(d);var n=l.count(),m=!0,p,q=0;$(".jc-option a.selected").each(function(){p=$(this).data("option")||c;$(this).parents("tr").data(p+"_fu")||(m=!1);$(this).parents("tr").hasClass("hasmatched")&&(q=1)});$(".attach-options a.selected").each(function(){$(this).parents("tr").prev().data("sfc_fu")||(m=!1);$(this).parents("tr").hasClass("hasmatched")&&(q=1)});1==n&&m^$(".single").hasClass("selected")&&$(".single").trigger("click");2==n?($(".gg-type[data-type\x3d'2*1']").trigger("click"),$(".single").hasClass("selected")&&$(".single").trigger("click")):15<n&&(new cx.Alert({content:"\u53ea\u652f\u630115\u573a\u4ee5\u5185\u7684\u6295\u6ce8\uff01"}),r(a,b,d,c,f));1==q?($("#optimize").addClass("hidden"),$(".btn").addClass("hidden"),$(".jjyc-img").removeClass("hidden")):($("#optimize").removeClass("hidden"),$(".btn").removeClass("hidden"),$(".jjyc-img").addClass("hidden"));k.refreshGGType(l.count());u.show();t.refresh()})});$(".table-option-list").on("click",".list-item",function(){var a=$("#selectTime"),c=$(this).data("field");$(".time").children(".time-num").each(function(){var d=$(this),e=d.closest(".match").data(c).split(" ")[1].split(":");a.empty().html(function(){return["dt"==c?"\u6bd4\u8d5b":"\u505c\u552e",'\u65f6\u95f4\x3ci class\x3d"table-option-arrow"\x3e\x3c/i\x3e'].join("")});d.html([e[0],e[1]].join(":"))})});$(".jc-box").on("click",".jc-table-action a",function(){var a=$(this),c=a.closest(".match"),d=c.next();""==d.html()?d.empty().load("ajax/attachOptionJL",{mid:c.data("mid")},function(){a.closest(".match").nextUntil(".match").filter(".attach-options").addClass("opened").show().find("td").show()}):a.closest(".match").nextUntil(".match").filter(".attach-options").addClass("opened").show().find("td").show()});$(".jc-box").on("click",".jc-table-action",function(){var a=$(this),c=a.closest(".attach-options").prev(),d=0,e=l.get(c.data("mid"));null!=e&&$.each(["sfc"],function(a,b){d+=e.playOptionsCount[b]});var b=c.data("sfc_fu")?'\x3cdiv class\x3d"mod-sup"\x3e\x3ci class\x3d"mod-sup-bg"\x3e\x3c/i\x3e\x3cu\x3e\u5355\x3c/u\x3e\x3c/div\x3e':"";c.find(".jc-table-action").empty().html(function(){return 0<d?'\x3ca href\x3d"javascript:;" class\x3d"selected"\x3e\u5df2\u9009'+d+'\u9879\x3ci class\x3d"arrow"\x3e\x3c/i\x3e'+b+"\x3c/a\x3e":'\x3ca href\x3d"javascript:;"\x3e\u80dc\u5206\u5dee\x3ci class\x3d"arrow"\x3e\x3c/i\x3e'+b+"\x3c/a\x3e"}).parent().addClass(function(){return 0<d?"selected":""});a.parents(".attach-options").removeClass("opened").find("td").hide()});var u=function(){function a(a,d){var c="\x3ctd\x3e"+d.options.wid+'\x3c/td\x3e\x3ctd class\x3d"tar"\x3e\x3cspan\x3e'+d.options.away+'\x3c/span\x3e\x3c/td\x3e\x3ctd class\x3d"tal"\x3e\x3cspan\x3e'+d.options.home+"\x3c/span\x3e\x3c/td\x3e",b='\x3ctd class\x3d"tal"\x3e\x3cspan class\x3d"selected-option-group"\x3e';$.each(d.playOptions,function(c,d){$.each(d,function(d,e){b+='\x3ca class\x3d"selected-option" href\x3d"javascript:;" data-index\x3d"'+a+'" data-type\x3d"'+c+'" data-val\x3d"'+d+'"\x3e'+v[c][d]+"("+e+")\x3c/a\x3e"})});b+="\x3c/span\x3e\x3c/td\x3e";return'\x3ctr data-mid\x3d"'+d.options.mid+'"\x3e'+c+b+'\x3ctd\x3e\x3ca class\x3d"del-match" href\x3d"javascript:;" data-index\x3d"'+a+'"\x3e\x26times;\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e'}return{show:function(){var c=l.getArray(),d=c.length;$("#no-matches").toggleClass("panel-hide",0<d);$(".has-matches").toggleClass("panel-hide",!d);var e='\x3ccolgroup\x3e\x3ccol width\x3d"60"\x3e\x3ccol width\x3d"83"\x3e\x3ccol width\x3d"83"\x3e\x3ccol width\x3d"264"\x3e\x3ccol width\x3d"60"\x3e\x3c/colgroup\x3e';$.each(c,function(b,c){e+=a(b,c)});$(".selected-matches").html(e);$(".seleFiveTit").children().toggleClass("bet-blue",0<d)}}}();$(".table-option").mouseover(function(){$(this).addClass("table-option-hover")}).mouseout(function(){$(this).removeClass("table-option-hover")});$("body").on("click",".jc-box-action",function(){var a=$(this);a.html(function(){return a.closest(".jc-box").hasClass("jc-box-hide")?"\u9690\u85cf":"\u663e\u793a"}).closest(".jc-box").toggleClass("jc-box-hide")}).on("click",".selected-option",function(){var a=$(this),c=a.data("index"),d=a.data("type"),a=a.data("val");l.getArray()[c].domOptions[d][a].trigger("click");0==l.count()&&($(".seleFiveTit").removeClass("seleFiveTit2").find("a").removeClass("bet-blue"),$(".seleFiveBox").hide())}).on("click",".del-match",function(){var a=l.getArray(),c=$(this).data("index"),a=a[c];$.each(a.domOptions,function(a,c){$.each(c,function(a,c){c.removeClass("selected").closest(".attach-options").prev().children(".open-attach").removeClass("selected").empty().html('\x3cdiv class\x3d"jc-table-action"\x3e\x3ca href\x3d"javascript:;"\x3e\u80dc\u5206\u5dee\x3ci class\x3d"arrow"\x3e\x3c/i\x3e\x3cdiv class\x3d"mod-sup"\x3e\x3ci class\x3d"mod-sup-bg"\x3e\x3c/i\x3e\x3cu\x3e\u5355\x3c/u\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e')})});l.remove(a.options.mid);a=l.count();k.refreshGGType(a);u.show();t.refresh();0==a&&($(".seleFiveTit").removeClass("seleFiveTit2").find("a").removeClass("bet-blue"),$(".seleFiveBox").hide())}).on("click",".clear-matches",function(){cx.Confirm({single:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u5df2\u9009\u62e9\u7684\u573a\u6b21\u5417\uff1f",btns:[{type:"confirm",txt:"\u786e\u5b9a"},{type:"cancel",txt:"\u53d6\u6d88"}],confirmCb:function(){$.each(l.getArray(),function(a,c){$.each(c.domOptions,function(a,c){$.each(c,function(a,c){c.removeClass("selected").closest(".attach-options").prev().children(".open-attach").removeClass("selected").empty().html('\x3cdiv class\x3d"jc-table-action"\x3e\x3ca href\x3d"javascript:;"\x3e\u80dc\u5206\u5dee\x3ci class\x3d"arrow"\x3e\x3c/i\x3e\x3cdiv class\x3d"mod-sup"\x3e\x3ci class\x3d"mod-sup-bg"\x3e\x3c/i\x3e\x3cu\x3e\u5355\x3c/u\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e')})})});l.empty();k.refreshGGType(l.count());u.show();t.refresh();$(".seleFiveTit").removeClass("seleFiveTit2").find("a").removeClass("bet-blue");$(".seleFiveBox").hide()}})}).on("click","#optimize a",function(){var a=t.getCastOptions2();if(2E5<a.money)return void new cx.Alert({content:["\x3ci class\x3d'icon-font'\x3e\x26#xe611;\x3c/i\x3e\u8ba2\u5355\u603b\u989d\u9700\u5c0f\u4e8e\x3cspan class\x3d'num-red'\x3e",cx.Money.format(2E5),"\x3c/span\x3e\u5143\uff0c\u8bf7\u4fee\u6539\u8ba2\u5355\u540e\u91cd\u65b0\u6295\u6ce8"].join("")});if(1E3<a.betTnum)return void new cx.Alert({content:"\x3ci class\x3d'icon-font'\x3e\x26#xe611;\x3c/i\x3e\u5956\u91d1\u4f18\u5316\u6700\u591a\u652f\u63011000\u6ce8"});var c=new Date,d=a.endTime.split(" "),e=d[0].split("-"),b=e[0],g=e[1]-1,e=e[2],d=d[1].split(":");if(new Date(b,g,e,d[0],d[1],d[2])<=c)return void new cx.Alert({content:"\x3ci class\x3d'icon-font'\x3e\x26#xe611;\x3c/i\x3e\u6709\u573a\u6b21\u5df2\u8fc7\u6295\u6ce8\u622a\u6b62\u65f6\u95f4",confirmCb:function(){location.reload()}});$("#optLotteryId").val(a.lid);$("#optBetNum").val(a.betTnum);$("#optMidStr").val(a.codecc);$("#optBetStr").val(a.codes);$("#optEndTime").val(a.endTime);$("#optIssue").val(a.issue);$("#optBetMoney").val(a.money);$("#optMulti").val(a.multi);$("#optopenEndtime").val(a.openEndtime);$("#optimizeForm").submit()});$(".lotteryTableTH-fixed-box").css({height:$(".lotteryTableTH").outerHeight()});$(".lotteryPlayWrap").hover(function(){$(this).find("h3").addClass("hover").next("div.lotteryPlayBox").show()},function(){$(".lotteryPlayWrap h3").removeClass().next("div.lotteryPlayBox").hide()});$(".seleFiveTit").click(function(){0<l.count()&&$(this).toggleClass("seleFiveTit2").next("div.seleFiveBox").toggle()})});function padd(q){return("0"+q).slice(-2)}function matchsCompare(q){return function(r,x){var v=r.options[q],p=x.options[q];return p<v?1:p>v?-1:0}};