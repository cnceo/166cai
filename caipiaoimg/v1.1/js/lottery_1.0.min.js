(function(){window.cx||(window.cx={});cx.closeCount=!1;var g=cx.Lottery=function(){function a(a,c){var h={};h[e.DLT]={"default":","};h[e.SSQ]={"default":","};h[e.SYXW]={"default":","};h[e.PLS]={"default":"",zx:"",z3:",",z6:","};h[e.PLW]={"default":""};h[e.QLC]={"default":","};h[e.QXC]={"default":""};h[e.FCSD]={"default":"",zx:"",z3:",",z6:","};var b=",";c||(c="default");a in h&&c in h[a]&&(b=h[a][c]);return b}function c(a,c){var h={};h[e.DLT]={"default":"|"};h[e.SSQ]={"default":"|"};h[e.PLS]={"default":",",zx:",",z3:"",z6:""};h[e.PLW]={"default":","};h[e.QXC]={"default":","};h[e.QLC]={"default":""};h[e.FCSD]={"default":",",zx:",",z3:"",z6:""};var b="|";c||(c="default");a in h&&c in h[a]&&(b=h[a][c]);return b}function b(a,c){var b={};b[e.DLT]={"default":!0};b[e.SSQ]={"default":!0};b[e.SYXW]={"default":!0};b[e.PLS]={"default":!1};b[e.PLW]={"default":!1};b[e.FCSD]={"default":!1};b[e.QXC]={"default":!1};b[e.QLC]={"default":!0};var d=!0;a in b&&(d=b[a]["default"]);return d}function d(a,c){var b={};b[e.DLT]={"default":"1"};b[e.SSQ]={"default":"1"};b[e.SYXW]={"default":"01"};b[e.PLS]={"default":"1",zx:"1",z3:"3",z6:"3"};b[e.FCSD]={"default":"1",zx:"1",z3:"3",z6:"3"};b[e.PLW]={"default":"1"};var d="1";c||(c="default");a in b&&c in b[a]&&(d=b[a][c]);return d}var e={DLT:23529,QLC:23528,QXC:10022,SYXW:21406,SSQ:51,PL3:33,PLS:33,PL5:35,PLW:35,JCZQ:42,JCLQ:43,FCSD:52,PLS:33,PLW:35,playTypes:{23529:{"default":1,zj:2},51:{"default":1},21406:{"default":"05",q1:"01",rx2:"02",rx3:"03",rx4:"04",rx5:"05",rx6:"06",rx7:"07",rx8:"08",qzhi2:"09",qzhi3:"10",qzu2:"11",qzu3:"12"},52:{"default":"1",zx:"1",z3:"2",z6:"3"},33:{"default":"1",zx:"1",z3:"2",z6:"3"},35:{"default":1},10022:{"default":1},23528:{"default":1}},getPlayTypeName:function(a,c){var b="",b={};a===e.SYXW?(b={"01":"\u524d1","02":"\u4efb\u9009\u4e8c","03":"\u4efb\u9009\u4e09","04":"\u4efb\u9009\u56db","05":"\u4efb\u9009\u4e94","06":"\u4efb\u9009\u516d","07":"\u4efb\u9009\u4e03","08":"\u4efb\u9009\u516b","09":"\u524d\u4e8c\u76f4\u9009",10:"\u524d\u4e09\u76f4\u9009",11:"\u524d\u4e8c\u7ec4\u9009",12:"\u524d\u4e09\u7ec4\u9009"},b=b[c]):a===e.PLS?(b={1:"\u76f4\u9009",2:"\u7ec4\u4e09",3:"\u7ec4\u516d"},b=b[c]):a===e.FCSD?(b={1:"\u76f4\u9009",2:"\u7ec4\u4e09",3:"\u7ec4\u516d"},b=b[c]):a===e.DLT?(b={0:"\u666e\u901a",1:"\u666e\u901a",2:"\u666e\u901a \u8ffd\u52a0"},b=b[c]):b="\u666e\u901a";return b},getCnName:function(a){a=parseInt(a,10);return{23529:"\u5927\u4e50\u900f",10022:"\u4e03\u661f\u5f69",23528:"\u4e03\u4e50\u5f69",51:"\u53cc\u8272\u7403",52:"\u798f\u5f693D",54:"11\u90095",21406:"11\u8fd0\u593a\u91d1",42:"\u7ade\u5f69\u8db3\u7403",43:"\u7ade\u5f69\u7bee\u7403",35:"\u6392\u52175",33:"\u6392\u52173",41:"\u5317\u5355",11:"\u80dc\u8d1f\u5f69",19:"\u4efb\u90099"}[a]},getRule:function(a,c){if(a==g.DLT)return"\u8bf7\u9009\u62e95-35\u4e2a\u7ea2\u7403\u548c2-12\u4e2a\u84dd\u7403";if(a==g.SSQ)return"\u8bf7\u9009\u62e96-33\u4e2a\u7ea2\u7403\u548c1-16\u4e2a\u84dd\u7403";if(a==g.SYXW){var b="";switch(c){case "rx2":b="\u81f3\u5c11\u9009\u62e92\u4e2a\u7403";break;case "rx3":b="\u81f3\u5c11\u9009\u62e93\u4e2a\u7403";break;case "rx4":b="\u81f3\u5c11\u9009\u62e94\u4e2a\u7403";break;case "rx5":b="\u81f3\u5c11\u9009\u62e95\u4e2a\u7403";break;case "rx6":b="\u81f3\u5c11\u9009\u62e96\u4e2a\u7403";break;case "rx7":b="\u81f3\u5c11\u9009\u62e97\u4e2a\u7403";break;case "rx8":b="\u81f3\u5c11\u9009\u62e98\u4e2a\u7403";break;case "q1":b="\u6bcf\u4f4d\u81f3\u5c11\u9009\u62e91\u4e2a\u7403";break;case "qzhi2":b="\u6bcf\u4f4d\u81f3\u5c11\u9009\u62e91\u4e2a\u7403\uff0c\u4e14\u76f8\u4e92\u4e0d\u91cd\u590d";break;case "qzu2":b="\u81f3\u5c11\u9009\u62e92\u4e2a\u7403";break;case "qzhi3":b="\u6bcf\u4f4d\u81f3\u5c11\u9009\u62e91\u4e2a\u7403\uff0c\u4e14\u76f8\u4e92\u4e0d\u91cd\u590d";break;case "qzu3":b="\u81f3\u5c11\u9009\u62e93\u4e2a\u7403"}return b}if(a==g.FCSD){b="";switch(c){case "zx":b="\u6bcf\u4f4d\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u7403";break;case "z3":b="\u81f3\u5c11\u9009\u62e92\u4e2a\u7403";break;case "z6":b="\u81f3\u5c11\u9009\u62e93\u4e2a\u7403"}return b}if(a==g.PLS){b="";switch(c){case "zx":b="\u6bcf\u4f4d\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u7403";break;case "z3":b="\u81f3\u5c11\u9009\u62e92\u4e2a\u7403";break;case "z6":b="\u81f3\u5c11\u9009\u62e93\u4e2a\u7403"}return b}if(a==g.PLW||a==g.QXC)return"\u6bcf\u4f4d\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u7403";if(a==g.QLC)return"\u81f3\u5c11\u9009\u62e97\u4e2a\u7403"},parseCast:function(a,c){var b=c.split(":"),d=b[0],f=b[1],p=-1<c.indexOf("$");c.indexOf("|");var g=[],k=[],q=[],u=[];a===e.DLT||a===e.SSQ?(k=d.split("|")[0],d=d.split("|")[1],p?(g=k.split("$")[0].split(","),k=k.split("$")[1].split(","),p=d.split("$"),2===p.length?(q=p[0].split(","),u=p[1].split(",")):(q=[],u=p[0].split(","))):(k=k.split(","),u=d.split(","))):k=33===a||35===a||52===a||10022===a||23528===a?d:11===a||19===a?d:21406===a?"09"==f||"10"==f?d.split("|"):d:d.split(",");f=e.getPlayTypeName(a,f);return{playTypeCode:b[1],modeCode:b[2],playType:f,preDan:g,preTuo:k,postDan:q,postTuo:u}},renderCast:function(a,c,b){a=parseInt(a,10);c=e.parseCast(a,c);var d=e.parseAward(a,b),f="",g="";b=c.preDan.concat(c.preTuo);var m=c.postDan.concat(c.postTuo),k=c.playTypeCode;$(b).each(function(c,b){21406==a?"01"==k?$(b.split(",")).each(function(a,b){f=-1<$.inArray(b,d.preCode.slice(0,1))&&1>c||!1===d.hasAward?f+e.renderRedDetail(b):f+e.renderGrayDetail(b)}):"09"==k?(""!=f&&(f+="\x3cem\x3e|\x3c/em\x3e"),$(b.split(",")).each(function(a,b){f=b==d.preCode[c]&&2>c||!1===d.hasAward?f+e.renderRedDetail(b):f+e.renderGrayDetail(b)})):"10"==k?(""!=f&&(f+="\x3cem\x3e|\x3c/em\x3e"),$(b.split(",")).each(function(a,b){f=b==d.preCode[c]&&3>c||!1===d.hasAward?f+e.renderRedDetail(b):f+e.renderGrayDetail(b)})):"11"==k?$(b.split(",")).each(function(a,b){f=-1<$.inArray(b,d.preCode.slice(0,2))&&2>c||!1===d.hasAward?f+e.renderRedDetail(b):f+e.renderGrayDetail(b)}):"12"==k?$(b.split(",")).each(function(a,b){f=-1<$.inArray(b,d.preCode.slice(0,3))&&3>c||!1===d.hasAward?f+e.renderRedDetail(b):f+e.renderGrayDetail(b)}):$(b.split(",")).each(function(a,b){f=-1<$.inArray(b,d.preCode)||!1===d.hasAward?f+e.renderRedDetail(b):f+e.renderGrayDetail(b)}):33==a||35==a||52==a||10022==a?"1"==k?$(b.split(",")).each(function(a,b){f=""!=f?f+"\x3cem\x3e|\x3c/em\x3e\x3c/span\x3e\x3cspan\x3e":f+"\x3cspan\x3e";$(b.split("")).each(function(b,c){f=c==d.preCode[a]||!1===d.hasAward?f+e.renderRedDetail(c):f+e.renderGrayDetail(c)})}):"2"!=k&&"3"!=k||$(b.split(",")).each(function(a,b){f=-1<$.inArray(b,d.preCode)||!1===d.hasAward?f+e.renderRedDetail(b):f+e.renderGrayDetail(b)}):11==a||19==a?$(b.split(",")).each(function(a,c){1<b.length?(""!=f&&(f+="\x3cem\x3e|\x3c/em\x3e"),$(c.split("")).each(function(b,c){f=c==d.preCode[a]||!1===d.hasAward?f+e.renderRedDetail(c):f+e.renderGrayDetail(c)})):f=c==d.preCode[a]||!1===d.hasAward?f+e.renderRedDetail(c):f+e.renderGrayDetail(c)}):-1<b.indexOf(",")?(""!=f&&(f+="\x3cem\x3e|\x3c/em\x3e"),$(b.split(",")).each(function(a,b){f=!0===d.hasAward?-1<$.inArray(b,d.preCode)?f+e.renderRedDetail(b):-1<$.inArray(b,d.postCode)?f+e.renderBlueDetail(b):f+e.renderGrayDetail(b):f+e.renderRedDetail(b)})):f=-1<$.inArray(b,d.preCode)||!1===d.hasAward?f+e.renderRedDetail(b):f+e.renderGrayDetail(b)});$(m).each(function(a,b){g=-1<$.inArray(b,d.postCode)||!1===d.hasAward?g+e.renderBlueDetail(b):g+e.renderGrayDetail(b)});f="["+c.playType+"]"+f;return{preTpl:f,postTpl:g}},parseAward:function(a,b){var c=[],d=[],e=!1;if(b){e=!0;b=(b+"").replace(/\s+/g,",");var g=-1<b.indexOf(":"),m=b.split(":"),c=m[0].split(","),d=[];g&&(d=m[1].split(","))}return{hasAward:e,preCode:c,postCode:d}},renderAward:function(a,b){var c="",d=e.parseAward(a,b);$(d.preCode).each(function(a,b){c+=g.renderRed(b)});$(d.postCode).each(function(a,b){c+=g.renderBlue(b)});""==c&&(c="\u672a\u5f00\u5956");return c},renderGray:function(a){return'\x3cspan class\x3d"ball ball-gray"\x3e'+a+"\x3c/span\x3e"},renderBlue:function(a){return'\x3cspan class\x3d"ball ball-blue"\x3e'+a+"\x3c/span\x3e"},renderRed:function(a){return'\x3cspan class\x3d"ball ball-red"\x3e'+a+"\x3c/span\x3e"},renderGrayDetail:function(a){return"\x3cem\x3e"+a+"\x3c/em\x3e"},renderBlueDetail:function(a){return'\x3cem class\x3d"spec"\x3e'+a+"\x3c/em\x3e"},renderRedDetail:function(a){return'\x3cem class\x3d"spec"\x3e'+a+"\x3c/em\x3e"},toCastString:function(g,l,h){h||(h="default");var v=":"+e.playTypes[g][h],f=":"+d(g,h),p=[],m,k=[],q=[],u;for(u in l){m=l[u].balls;for(var q=[],n=0;n<m.length;++n){k=[];m[n].sort(function(a,b){return parseInt(a,10)>parseInt(b,10)});for(var r=0;r<m[n].length;++r)m[n][r]+="",2>m[n][r].length&&b(g,h)&&(m[n][r]="0"+m[n][r]),k.push($.trim(m[n][r]));k=k.join(a(g,h));q.push(k)}q=q.join(c(g,h));p.push(q+v+f)}return p.join(";")},renderBasket:function(){},getPlayType:function(){}};return e}();(cx.BoxCollection=function(a){this.$el=$(a);this.boxes=[];this.betMoney=2}).prototype={add:function(a){this.boxes.push(a);a.setCollection(this)},addBall:function(a){var c={balls:[],betNum:0};$(this.boxes).each(function(b,d){d.removeAll();for(var e=0;e<a[b].length;++e)d.addBall(a[b][e]);c.balls.push(d.balls)});c.betNum=this.calcBetNum();return c},isValid:function(){for(var a=0;a<this.boxes.length;++a)if(!this.boxes[a].isValid())return!1;return!0},removeAll:function(){$(this.boxes).each(function(a,c){c.removeAll()})},renderBet:function(){this.$el.find(".bet-num").html(this.calcBetNum());this.$el.find(".bet-money").html(this.calcMoney());this.isValid()?this.$el.find(".add-basket").removeClass("disabled"):this.$el.find(".add-basket").addClass("disabled")},rand:function(){var a={balls:[],betNum:0};$(this.boxes).each(function(c,b){a.balls.push(b.rand())});a.betNum=this.calcBetNum();$(this.boxes).each(function(a,b){b.removeAll()});return a},edit:function(){var a={balls:[],betNum:0};$(this.boxes).each(function(c,b){a.balls.push(b.edit())});a.betNum=this.calcBetNum();$(this.boxes).each(function(a,b){b.removeAll()});return a},getError:function(){var a=[];$(this.boxes).each(function(c,b){a.push(b.getError())});return a},getAllBalls:function(){var a=[];$(this.boxes).each(function(b,c){a.push(c.getBalls())});var c=this.calcBetNum();$(this.boxes).each(function(a,c){c.removeAll()});return{balls:a,betNum:c}},getStrings:function(){var a=[];$(this.boxes).each(function(c,b){a.push(b.joinBalls())});return a},calcBetNum:function(){var a=1;$(this.boxes).each(function(c,b){a*=b.calcComb()});return a},calcMoney:function(){return this.calcBetNum()*this.betMoney},setBetMoney:function(a){this.betMoney=a},getBoxes:function(){return this.boxes}};cx.BallBox=function(a,c){this.selector=a;this.$el=$(a);this.options=c||{};this.options.mutex=this.options.mutex||!1;this.options.playType=this.options.playType||"default";this.minBall=this.options.minBall||0;this.balls=[];this.odds=[];this.evens=[];this.bigs=[];this.smalls=[];this.all=[];for(var b=Math.ceil(this.options.amount/2),d=this.minBall;d<=this.options.amount;++d)this.all.push(d),0==d%2?this.evens.push(d):this.odds.push(d),d>=b?this.bigs.push(d):this.smalls.push(d);this.error=!1;this.init()};cx.BallBox.prototype={init:function(){var a=this;this.$balls=a.$el.find(".balls li");this.$balls.click(function(){var c=$(this),b=c.html();c.hasClass("selected")?(c.removeClass("selected"),a.removeBall(b)):(c.addClass("selected"),a.addBall(b));a.collection.renderBet()}).hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")});this.$el.find(".clear-balls").click(function(){a.removeAll()});this.$el.find(".filter-bigs").click(function(){a.removeAll();for(var c,b=0;b<a.bigs.length;++b)c=a.bigs[b],a.$balls.eq(c-a.minBall).trigger("click")});this.$el.find(".filter-smalls").click(function(){a.removeAll();for(var c,b=0;b<a.smalls.length;++b)c=a.smalls[b],a.$balls.eq(c-a.minBall).trigger("click")});this.$el.find(".rand-select").click(function(){var c=a.$el.find(".rand-count").val();a.removeAll();a.rand(c,function(b){a.addBall(b+"");a.$balls.eq(b-1).addClass("selected")});a.collection.renderBet()});this.$el.find(".filter-odds").click(function(){a.removeAll();for(var c,b=0;b<a.odds.length;++b)c=a.odds[b],a.$balls.eq(c-a.minBall).trigger("click")});this.$el.find(".filter-evens").click(function(){a.removeAll();for(var c,b=0;b<a.evens.length;++b)c=a.evens[b],a.$balls.eq(c-a.minBall).trigger("click")});this.$el.find(".filter-all").click(function(){a.removeAll();for(var c,b=0;b<a.all.length;++b)c=a.all[b],a.$balls.eq(c-a.minBall).trigger("click")})},setCollection:function(a){this.collection=a},isValid:function(){return this.balls.length>=this.options.min},rand:function(a,c){a||(a=this.options.min);var b=this;c||(c=function(a){b.balls.push(a)});var d;this.balls=[];for(var e=this.getMutexBoxes(),g=!0;this.balls.length<a;)if(g=!0,d=Math.ceil(Math.random()*this.options.amount),d>=this.minBall&&-1===$.inArray(d,this.balls))if(this.options.mutex){for(var l=0;l<e.length;++l)if(-1!==$.inArray(d,e[l].balls)){g=!1;break}g&&c(d)}else c(d);this.error=!1;return this.balls.sort(function(a,b){return parseInt(a,10)>parseInt(b,10)})},edit:function(a,c){a||(a=this.options.min);var b=this;c||(c=function(a){b.balls.push(a)});var d,e;this.balls=[];for(var g=this.getMutexBoxes(),l=0;l<$(b.selector).length;l++){e=parseInt($(b.selector).eq(l).val(),10);if(isNaN(e))d="\u8bf7\u586b\u5199\u6570\u5b57",e=$(b.selector).eq(l).val();else if(e>this.options.amount||1>e)d="\u6570\u5b57\u8d85\u8fc7\u8303\u56f4";else if(e>=this.minBall&&-1==$.inArray(e,this.balls)){if(this.options.mutex)for(var h=0;h<g.length;++h)-1!==$.inArray(e,g[h].balls)&&(d="\u4e92\u65a5\u9519")}else d="\u540c\u79cd\u989c\u8272\u7684\u7403\u6570\u5b57\u91cd\u590d";c(e)}d?(this.error=!0,cx.Alert({content:d})):this.error=!1;return this.balls},getError:function(){return this.error},calcComb:function(){if(this.balls.length<this.options.min)return 0;var a=cx.Math.combine(this.balls.length,this.options.min);"z3"==this.options.playType&&(a*=2);return a},joinBalls:function(){return this.balls.join(",")},getBalls:function(){return this.balls},addBall:function(a){a=parseInt(a,10);if(!(-1<$.inArray(a,this.balls))){this.balls.push(a);this.change();var c=this.getMutexBoxes();if(this.options.mutex)for(var b=0;b<c.length;++b)c[b].removeBall(a),c[b].$balls.eq(a-1).removeClass("selected")}},removeBall:function(a){a=parseInt(a,10);a=$.inArray(a,this.balls);-1!=a&&this.balls.splice(a,1)},change:function(){},removeAll:function(){this.balls=[];this.$balls.removeClass("selected");this.collection.renderBet()},addAll:function(){for(var a=1;a<=this.options.amount;++a)this.addBall(a)},addOdds:function(){for(var a=0;a<this.odds.length;++a)this.addBall(this.odds[a])},addEvens:function(){for(var a=0;a<this.evens.length;++a)this.addBall(this.odds[a])},addBigs:function(){for(var a=0;a<this.bigs.length;++a)this.addBall(this.odds[a])},addSmalls:function(){for(var a=0;a<this.smalls.length;++a)this.addBall(this.odds[a])},getMutexBoxes:function(){if(null==this.options.mutex)return[];if(!this.mutexBoxes){var a=this.collection.getBoxes(),c=$.inArray(this,a),b,d=0;for(this.mutexBoxes=[];d<a.length;++d)b=a[d],c!==d&&b.options.mutex===this.options.mutex&&this.mutexBoxes.push(a[d])}return this.mutexBoxes}};(cx.BallBoxView=function(a,c){this.$self=$(a);this.model=c.model;this.splitEvent=/^(\S+)\s*(.*)$/;this.events=c.events||{};this.init()}).prototype={init:function(){this.model.change=$.proxy(this.render,this);this.deleteEvents()},render:function(){},deleteEvents:function(){var a,c,b,d;for(d in this.events)b=events[d],a=d.match(this.splitEvent),c=a[1],a=a[2],this.$self.on(c,a,b);return this}};(cx.CastBasket=function(a,c){this.$el=$(a);this.lotteryId=c.lotteryId;this.boxes=c.boxes;this.issue=c.issue;this.multiModifier=c.multiModifier;this.zhModifier=c.zhModifier;this.strings={};this.autoId=0;this.$castList=this.$el.find(".cast-list");this.$betNum=this.$el.find(".total-bet-num");this.$betMoney=this.$el.find(".total-bet-money");this.betMoney=this.betNum=0;this._betMoney=2;this.playType=c.playType||"default";this.getCastOptions=this[c.getCastOptions]||this.getCastOptions;this.init()}).prototype={init:function(){var a=this;this.multiModifier.setCb(function(){a.renderBetMoney()});this.$el.find(".add-bet").click(function(){a._betMoney=2;a.playType="default";"checked"==$(this).attr("checked")&&(a._betMoney=3,a.playType="zj");a.setBetMoney();a.betMoney=a._betMoney*a.betNum*a.multiModifier.getValue();a.$betMoney.html(a.betMoney)});this.$el.find(".add-basket").click(function(){if(a.boxes.isValid()){var c=a.boxes.getAllBalls();a.add(c);a.boxes.removeAll();$("html body").animate({scrollTop:$(".userLottery").offset().top})}else cx.Alert({content:cx.Lottery.getRule(a.lotteryId,a.playType)})});this.$el.find(".rand-cast").click(function(){for(var c=$(this),c=parseInt(c.data("amount"),10),b,d=0;d<c;++d)b=a.boxes.rand(),a.add(b)});this.$el.on("click",".remove-str",function(){var c=$(this).closest("li");c.remove();a.remove(c.data("index"))});this.$el.on("click",".modify-str",function(){var c=$(this).parent().find("strong").html();a.boxes.boxes[0].removeAll();$(c.split(" ")).each(function(b,c){c=parseInt(c,10);isNaN(c)||(a.boxes.boxes[0].addBall(c+""),a.boxes.boxes[0].$balls.eq(c-1).addClass("selected"))});c=$(this).parent().find("span").html();a.boxes.boxes[1].removeAll();$(c.split(" ")).each(function(b,c){c=parseInt(c,10);isNaN(c)||(a.boxes.boxes[1].addBall(c+""),a.boxes.boxes[1].$balls.eq(c-1).addClass("selected"))});a.boxes.renderBet()});this.$el.find(".clear-list").click(function(){a.removeAll()});this.$el.find(".submit").click(function(c){c=$(this);if(c.hasClass("not-login")||!$.cookie("name_ie"))cx.PopLogin.show();else if(c.hasClass("not-bind"))cx.PopBind.show();else if(c=a.getCastOptions(),c.isToken=1,0==c.money)new cx.Alert({content:"\u8bf7\u5148\u9009\u62e9\u4f60\u8981\u8d2d\u4e70\u7684\u53f7\u7801"});else{if(0<=$.inArray(c.lid,[35,51,10022,23528,23529])){if(2E4<c.money){new cx.Alert({content:"\u8ba2\u5355\u91d1\u989d\u9700\u5c0f\u4e8e2\u4e07\uff0c\u8bf7\u4fee\u6539\u8ba2\u5355\u540e\u91cd\u65b0\u6295\u6ce8"});return}}else if(2E5<c.money){new cx.Alert({content:"\u8ba2\u5355\u91d1\u989d\u9700\u5c0f\u4e8e20\u4e07\uff0c\u8bf7\u4fee\u6539\u8ba2\u5355\u540e\u91cd\u65b0\u6295\u6ce8"});return}if(a.$el.find(".ipt_checkbox#agreenment").get(0)&&!a.$el.find(".ipt_checkbox#agreenment").attr("checked")||a.$el.find(".ipt_checkbox#agreenment1").get(0)&&!a.$el.find(".ipt_checkbox#agreenment1").attr("checked"))return void new cx.Alert({content:"\u8bf7\u5148\u9605\u8bfb\u5e76\u540c\u610f\u300a\u59d4\u6258\u6295\u6ce8\u89c4\u5219\u300b\u540e\u624d\u80fd\u7ee7\u7eed"});if(a.$el.find(".ipt_checkbox#agreenment2").get(0)&&!a.$el.find(".ipt_checkbox#agreenment2").attr("checked"))return void new cx.Alert({content:"\u8bf7\u5148\u9605\u8bfb\u5e76\u540c\u610f\u300a\u9650\u53f7\u6295\u6ce8\u98ce\u9669\u987b\u77e5\u300b\u540e\u624d\u80fd\u7ee7\u7eed"});cx.ajax.post({url:"order/create",data:c,success:function(b){if(0==b.code){var c={ctype:"pay",orderId:b.data.orderId,money:b.data.money};new cx.Confirm({title:"\u786e\u8ba4\u8d2d\u5f69",content:betInfo.number(cx.Lottery.getCnName(a.lotteryId),a.issue.getIssue(),b.data.money,b.data.remain_money),input:0,confirmCb:function(){this.input&&(c.pay_pwd=$("#pay_pwd").val(),"1"==$("#pay_pwd").data("encrypt")&&(c.pay_pwd=cx.rsa_encrypt(c.pay_pwd),c.encrypt||(c.encrypt=""),-1==c.encrypt.indexOf("pay_pwd")&&(c.encrypt+="pay_pwd|")));cx.ajax.post({url:"order/pay",data:c,success:function(b){cx.castCb(b,a,".pwderror")}})}})}else cx.castCb(b,a)}})}});this.$el.find(".has-chase").change(function(){var c=$(this),b=a.$el.find(".zh-modifier");c.attr("checked")?b.show():b.hide()});this.$el.find(".start-crowd").click(function(){!$(this).hasClass("not-login")&&$.cookie("name_ie")&&0<a.betMoney&&new cx.CrowdBuy(".crowd-buy",a.getCastOptions())})},getCastOptions:function(){var a=g.toCastString(this.lotteryId,this.strings,this.playType);return{codes:a,buy_source:0,codes:a,lid:this.lotteryId,money:this.betMoney,multi:this.multiModifier.getValue(),bet_tnum:this.betNum,issue:this.issue.getIssue(),is_chase:0,order_type:0,is_upload:0}},getCastOptions1:function(){return{ctype:"create",buyPlatform:0,codes:g.toCastString(this.lotteryId,this.strings,this.playType),lid:this.lotteryId,money:this.betMoney,multi:this.multiModifier.getValue(),issue:this.issue.getIssue(),playType:parseInt(cx.Lottery.playTypes[this.lotteryId][this.playType],10)||0,betTnum:this.betNum,isChase:"zj"==this.playType?1:0,orderType:0,endTime:this.issue.endTime}},add:function(a){this.autoId+=1;this.strings[this.autoId]=a;this.$castList.prepend(this.renderString(a.balls,this.autoId,this._betMoney*a.betNum));this.betNum+=a.betNum;this.betMoney=this._betMoney*this.betNum;this.renderAllBet()},rand:function(a){for(var c="",b=0;b<a;++b)c=boxes.rand().join(" "),this.add(c)},renderAllBet:function(){this.$betNum.html(this.betNum);this.renderBetMoney()},renderBetMoney:function(){this.betMoney=this._betMoney*this.multiModifier.getValue()*this.betNum;this.$betMoney.html(this.betMoney)},removeAll:function(){this.strings={};this.betMoney=this.betNum=0;this.$castList.empty();this.renderAllBet()},remove:function(a){this.betNum-=this.strings[a].betNum;this.betMoney=this._betMoney*this.betNum;delete this.strings[a];this.renderAllBet()},calcMoney:function(){},setBetMoney:function(){var a=this;$(".cast-list").find("li").each(function(){var c=[],b=[],d;d=0;d=$.trim($(this).find("strong").html()).replace(/[^0-9]/g,",");d=d.split(",");for(pos in d)c.push($.trim(d[pos]));d=$.trim($(this).find("span").html()).replace(/[^0-9]/g,",");d=d.split(",");for(pos in d)b.push($.trim(d[pos]));d=cx.Math.combine(c.length,5)*cx.Math.combine(b.length,2);$(this).find(".bet-money").html(d*a._betMoney+"\u5143")})},renderString:function(a,c,b){function d(a){a=""+a;2>a.length&&(a="0"+a);return a}c='\x3cli data-index\x3d"'+c+'"\x3e';for(var e=[],t=0;t<a.length;++t){var l=0<t&&(this.lotteryId==g.DLT||this.lotteryId==g.SSQ)?"\x3cspan\x3e":"\x3cstrong\x3e";a[t].sort(function(a,b){a=parseInt(a,10);b=parseInt(b,10);return a>b?1:a<b?-1:0});for(var h=0;h<a[t].length;++h)l+=d(a[t][h])+" ";l=0<t&&(this.lotteryId==g.DLT||this.lotteryId==g.SSQ)?l+"\x3c/span\x3e":l+"\x3c/strong\x3e";e.push(l)}e=e.join("\x3cem\x3e|\x3c/em\x3e");c=c+e+('\x3ca class\x3d"remove-str"\x3e\u5220\u9664\x3c/a\x3e\x3cspan class\x3d"bet-money"\x3e'+b+"\u5143\x3c/span\x3e");return c+="\x3c/li\x3e"}};(cx.Issue=function(a,c){this.$el=$(a);this.issue="";this.lotteryId=c.lotteryId;this.render=c.render;this.$currIssue=this.$el.find(".curr-issue");this.$countDown=this.$el.find(".count-down");this.$endTime=this.$el.find(".end-time");this.$weekDay=this.$el.find(".week-day");this.endTime="";this.init()}).prototype={init:function(){this.requestIssue()},getIssue:function(){return this.issue},requestIssue:function(){var a=this;cx.ajax.get({url:cx.url.getBaseUrl("api/data/getNumCurrent"),data:{lid:a.lotteryId,state:100,ci:1,t:(new Date).valueOf(),cache_2345caipiao:"lid-"+a.lotteryId+"_state-100_ci-1:1:1"},success:function(c){if(0==c.code){var b=c.data;a.issue=c.data.seExpect;a.$currIssue.html(c.data.seExpect);a.$endTime.html(cx.Datetime.format(c.data.seFsendtime,{year:!1,seconds:!1}));a.endTime=cx.Datetime.format(c.data.seFsendtime,{year:!0,seconds:!0});a.$weekDay.html(cx.Datetime.getWeekDay(c.data.seFsendtime));0<a.$countDown.length&&(c=new cx.Counter({start:b.seFsendtime-b.nowTime-1E3}),a.render||(a.render=function(b){b=cx.Datetime.formatTime(b);var c="";"day"in b&&(c+=b.day+"\u5929");"hour"in b&&(c+=b.hour+"\u65f6");"min"in b&&(c+=b.min+"\u5206");"second"in b&&(c+=b.second+"\u79d2");a.$countDown.html(c+"\u540e\u622a\u6b62")}),c.countDown(function(b){a.render.call(a,b)},function(){a.$countDown.html("\u671f\u53f7\u66f4\u65b0\u4e2d");a.requestIssue()}))}}})}};(cx.LastAward=function(a,c){this.$el=$(a);this.lotteryId=c.lotteryId;this.$awardNums=this.$el.find(".award-nums");this.$lastIssue=this.$el.find(".last-issue");this.$lastAwardDatetime=this.$el.find(".last-award-datetime");this.init()}).prototype={init:function(){var a=this;cx.ajax.get({url:cx.url.getBaseUrl("api/data/getLastAward"),data:{lid:a.lotteryId,state:201,ps:1,t:(new Date).valueOf(),cache_2345caipiao:"lid-"+a.lotteryId+"_state-201_ps-1:6:1"},success:function(c){c=c.data.items[0];var b=cx.Lottery.renderAward(a.lotteryId,c.awardNumber);a.$awardNums.html(b);a.$lastIssue.html(c.seExpect)}})}};(cx.CrowdBuy=function(a,c){this.$el=$(a).clone();$("body").append(this.$el);this.castOptions=c||{};this.$close=this.$el.find(".close");this.$commision=this.$el.find(".commision-per");this.$myMoney=this.$el.find(".my-money");this.$myPer=this.$el.find(".my-per");this.$leastPer=this.$el.find(".least-per");this.$guaranteePer=this.$el.find(".guarantee-per");this.$guaranteeMoney=this.$el.find(".guarantee-money");this.$guaranteeAll=this.$el.find(".guarantee-all");this.$guaranteeNone=this.$el.find(".guarantee-none");this.$hasPrivate=this.$el.find(".has-private");this.maxMoney=this.castOptions.money;this.commision=0;this.myPer=5;this.guaranteeMoney=this.guaranteePer=0;this.guaranteeAll=!1;this.hasPrivate=1;this.leastPer=5;this.leastMoney=Math.ceil(this.maxMoney*this.leastPer/100);1>this.leastMoney&&(this.leastPer=Math.round(this.leastMoney/this.maxMoney*1E4)/100);this.init()}).prototype={renderByMoney:function(a){this.myMoney=a;this.myPer=Math.round(a/this.maxMoney*1E4)/100;this.$myMoney.html(this.myMoney);this.$myPer.val(this.myPer)},renderByPer:function(a){this.myMoney=this.maxMoney*a/100;this.myPer=a;1>this.myMoney&&(this.myMoney=1,this.myPer=Math.round(this.myMoney/this.maxMoney*1E4)/100);this.$myMoney.html(this.myMoney);this.$myPer.val(this.myPer)},renderGuarantee:function(a){this.guaranteePer=a;this.guaranteeMoney=a/100*this.maxMoney;this.guaranteeMoney=Math.min(this.guaranteeMoney,this.maxMoney-this.myMoney);this.guaranteeMoney=Math.round(100*this.guaranteeMoney)/100;this.$guaranteePer.val(this.guaranteePer);this.$guaranteeMoney.html(this.guaranteeMoney)},init:function(){var a=this;cx.Mask.show();this.renderByPer(a.leastPer);this.$el.show();this.$el.find(".crowd-tip-gua").hover(function(){a.$el.find(".crowd-tip-gua-content").show()},function(){a.$el.find(".crowd-tip-gua-content").hide()});this.$commision.change(function(){var c=parseInt($(this).val(),10);a.commision=c;5<c?c>a.leastPer&&(a.leastPer=c,a.leastMoney=Math.round(a.leastPer/100*a.maxMoney*100)/100,c>a.myPer&&a.renderByPer(c)):(a.leastPer=5,a.leastMoney=Math.round(a.leastPer/100*a.maxMoney*100)/100)});this.$myPer.blur(function(){var c=$(this),b=c.val();""==b?(c.val(a.leastPer),a.renderByPer(a.leastPer)):(b=parseInt(b,10),b<a.leastPer&&(b=a.leastPer),100<b&&(b=100),b=parseInt(b,10),a.renderByPer(b));a.renderGuarantee(a.guaranteePer)});this.$guaranteePer.blur(function(){""==$(this).val()&&a.renderGuarantee(0)});this.$guaranteePer.keyup(function(){var c=$(this).val(),b=$(this);""==c?(b.val(0),a.renderGuarantee(0)):/^\d*$/.test(c)?(c=parseInt(c,10),100<c&&(c=100),a.renderGuarantee(c)):b.val(c.slice(0,-1))});this.$guaranteeAll.click(function(){a.guaranteePer=100;a.guaranteeMoney=a.maxMoney;a.renderGuarantee(100)});this.$guaranteeNone.click(function(){a.guaranteePer=0;a.guaranteeMoney=a.maxMoney;a.renderGuarantee(0)});this.$hasPrivate.click(function(){var c=$(this);c.hasClass("selected")||(a.$hasPrivate.removeClass("selected"),c.addClass("selected"),a.hasPrivate=c.data("val"))});this.$el.find(".close").click(function(){a.$el.remove();cx.Mask.hide()});this.$el.find(".btn-cancel").click(function(){a.$el.remove();cx.Mask.hide()});this.$el.find(".submit-crowd").click(function(){var c=a.getCrowdCastOptions();c.isToken=1;var b=["commision","totalFraction","myFraction","hasPrivate","myGuarantee"],d;for(d in b)if(null===a[b[d]])return;b=cx.url.getBusiUrl("ticket/order/create");cx.ajax.post({url:b,data:c,success:function(b){a.$el.hide();cx.castCb(b,a)}})})},setCastOptions:function(a){this.castOptions=a;this.init()},setMoney:function(a){this.money=a},getCrowdCastOptions:function(){this.castOptions.tnum=1E4*this.maxMoney/100;this.castOptions.wrate=this.commision;this.castOptions.oflag=this.hasPrivate;this.castOptions.bnum=1E4*this.myMoney/100;this.castOptions.pnum=1E4*this.guaranteeMoney/100;this.castOptions.name="test";this.castOptions.desc="test";this.castOptions.order_type=1;return this.castOptions}};$(function(){$(".join-crowd").click(function(){var a=$(this).closest(".crowd-detail"),c=a.find(".my-fraction"),b=a.data("id"),d=parseFloat(a.data("one"),10),a=a.data("max"),e=c.val();""==e||isNaN(parseFloat(e,10))||c.hasClass("gray")?new cx.Alert({content:"\u8bf7\u586b\u5199\u60a8\u9700\u8981\u8d2d\u4e70\u7684\u91d1\u989d"}):(e=parseFloat(e,10),e>a*d?new cx.Alert({content:"\u6700\u591a\u80fd\u8d2d\u4e70"+a*d+"\u5143"}):new cx.Confirm({title:"\u786e\u8ba4\u8d2d\u4e70",content:"\u7acb\u5373\u8d2d\u4e70"+cx.Money.round(e)+"\u5143",confirmCb:function(){cx.ajax.post({url:cx.url.getBusiUrl("ticket/order/gendan"),data:{orderId:b,money:cx.Money.round(e),bnum:Math.round(1E4*cx.Money.round(e)/100),buy_source:0,isToken:1},success:function(a){cx.castCb(a,self)}})}}))})});cx.castCb=function(a,c,b){0==a.code?("random"in c&&c.random(),b&&($(".pop-confirm").remove(),cx.Mask.hide()),new cx.Confirm({single:"\u606d\u559c\u60a8\uff0c\u4ed8\u6b3e\u6210\u529f\u7b49\u5f85\u51fa\u7968",btns:[{type:"cancel",txt:"\u7ee7\u7eed\u8d2d\u5f69"},{type:"confirm",txt:"\u67e5\u770b\u8be6\u60c5",href:baseUrl+"orders/detail/"+a.data.orderId}],cancelCb:function(){var a=location.href.split("?");location.href=a[0]}})):12==a.code?new cx.Confirm({content:betInfo.number(cx.Lottery.getCnName(c.lotteryId),c.issue.getIssue(),a.data.money,a.data.remain_money),btns:[{type:"confirm",txt:"\u53bb\u652f\u4ed8",href:baseUrl+"wallet/directPay?orderId\x3d"+a.data.orderId}]}):b?$(b).html(a.msg):new cx.Alert({content:a.msg})}})();$(function(){(function(){$(".lotteryTableCP tr.match").hover(function(g){$(this).addClass("hover");$(this).next().not(".match").addClass("hover")},function(){$(this).removeClass("hover");$(this).next().not(".match").removeClass("hover")});$(".lotteryTableCP tr.match").next().hover(function(g){$(this).hasClass("match")||($(this).addClass("hover"),$(this).prev().addClass("hover"))},function(){$(this).hasClass("match")||($(this).removeClass("hover"),$(this).prev().removeClass("hover"))})})()});