(function(){function e(a){var b=0;$.ajax({type:"POST",url:"/mainajax/uinfoCheck",data:a,dataType:"json",async:!1,success:function(a){b=a;1==b&&recaptcha_reg()}});return b}window.cx||(window.cx={});var l={username_phonenum:{pattern:/^[\d\w_]{3,24}$|^.*[\u4e00-\u9fa5].*$/,anti_charpattern:/[\u4e00-\u9fa5]/,tips:{empty_tip:"\u8bf7\u586b\u5199\u624b\u673a\u53f7\u6216\u8d26\u53f7",format_tip:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7\u6216166\u5f69\u8d26\u53f7"}},username:{cbfun:function(a,b){a=$.trim(a);return 2>a.length?(b.call(this,"\u6700\u5c111\u4e2a\u6c49\u5b57\u62162\u4e2a\u5b57\u7b26",null,"error"),!1):24<a.replace(/[^\x00-\xff]/g,"**").length?(b.call(this,"\u8bf7\u4e0d\u8981\u8d85\u8fc712\u4e2a\u6c49\u5b57\u621624\u4e2a\u5b57\u7b26",null,"error"),!1):/^[0-9]*$/.test(a)?(b.call(this,"\u7528\u6237\u540d\u4e0d\u80fd\u662f\u7eaf\u6570\u5b57\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",null,"error"),!1):/[^\u4E00-\u9FA5\w_@\.\-]/.test(a)?(b.call(this,"\u8bf7\u8f93\u5165\u6c49\u5b57\uff0c\u5b57\u6bcd\uff0c\u6570\u5b57",null,"error"),!1):!0},cbajax:e,tips:{empty_tip:"\u8bf7\u586b\u5199\u7528\u6237\u540d",format_tip:"\u652f\u6301\u4e2d\u6587\uff0c\u5b57\u6bcd\u3001\u6570\u5b57\u7ec4\u5408\uff0c2-24\u5b57\u7b26",1:"\u8bf7\u8f93\u5165\u6c49\u5b57\uff0c\u5b57\u6bcd\uff0c\u6570\u5b57",2:"\u6b64\u5e10\u53f7\u5df2\u88ab\u6ce8\u518c\uff0c\u8bf7\u767b\u5f55\u6216\u91cd\u65b0\u8f93\u5165",3:"\u6b64\u8d26\u53f7\u5df2\u88ab\u6ce8\u9500"}},phonenum:{cbajax:e,pattern:/^\d{11}$/,anti_charpattern:/[\u4e00-\u9fa5,a-z]/,tips:{empty_tip:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",format_tip:"\u8bf7\u8f93\u5165\u672c\u4eba\u624b\u673a\u53f7\u7801",error_tip:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801",1:"\u8be5\u624b\u673a\u53f7\u5df2\u6ce8\u518c\uff0c\u60a8\u53ef\u4ee5\u6362\u7ed1\u624b\u673a\u6216\x3ca href\x3d'/main/login'\x3e\u7acb\u5373\u767b\u5f55\x3c/a\x3e",2:"\u8be5\u624b\u673a\u53f7\u5df2\u88ab\u6ce8\u9500"}},wechat:{cbajax:e,pattern:/^\d{11}$/,anti_charpattern:/[\u4e00-\u9fa5,a-z]/,tips:{empty_tip:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",format_tip:"\u8bf7\u8f93\u5165\u672c\u4eba\u624b\u673a\u53f7\u7801",error_tip:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801",1:"\u8be5\u624b\u673a\u53f7\u5df2\u7ed1\u5b9a\u4e86\u5176\u4ed6\u5fae\u4fe1\u8d26\u53f7\uff0c\u8bf7\u66f4\u6362\u624b\u673a\u53f7\u7801",2:"\u8be5\u624b\u673a\u53f7\u5df2\u88ab\u6ce8\u9500"}},lxcheck:{cbajax:e,pattern:/^\d{11}$/,anti_charpattern:/[\u4e00-\u9fa5,a-z]/,tips:{empty_tip:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",format_tip:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801",0:"\u624b\u673a\u53f7\u4e0d\u5b58\u5728",1:"\u60a8\u7684\u624b\u673a\u53f7\u5df2\u6ce8\u518c\uff0c\u53bb\x3ca href\x3d'/main/login' target\x3d'_blank'\x3e\u767b\u5f55\x3c/a\x3e",2:"\u60a8\u7684\u624b\u673a\u53f7\u5df2\u53c2\u4e0e\u8fc7\u6b64\u6d3b\u52a8\uff0c\u5feb\u53bb\x3ca href\x3d'/main/register' target\x3d'_blank'\x3e\u6ce8\u518c\x3c/a\x3e\u9886\u53d6\u7ea2\u5305\u5427"}},findpwd:{cbajax:e,pattern:/^\d{11}$/,anti_charpattern:/[\u4e00-\u9fa5,a-z]/,tips:{empty_tip:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",format_tip:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801",1:"\u624b\u673a\u53f7\u4e0d\u5b58\u5728"}},modifyPhone:{cbajax:e,pattern:/^\d{11}$/,anti_charpattern:/[\u4e00-\u9fa5,a-z]/,tips:{empty_tip:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",format_tip:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801",1:"\u624b\u673a\u53f7\u5df2\u88ab\u6ce8\u518c"}},nickname:{pattern:/^[\d\w!@#\$%\^&\*\(\)\[\]\{\}\/\:\;\"\'<>,\.\?\-\|\u4e00-\u9fa5]{1,36}$/,tips:{empty_tip:"\u8bf7\u8f93\u5165\u6635\u79f0",format_tip:"\u8bf7\u8f93\u51651-36\u4f4d\u957f\u5ea6\u7684\u6635\u79f0"}},email:{cbajax:e,pattern:/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/,tips:{empty_tip:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740",format_tip:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u5730\u5740",1:"\u8be5\u90ae\u7bb1\u5df2\u88ab\u7ed1\u5b9a\uff0c\u8bf7\u7ed1\u5b9a\u5176\u4ed6\u90ae\u7bb1"}},same_email:{cbajax:e,pattern:/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/,tips:{empty_tip:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740",format_tip:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u5730\u5740",1:"\u539f\u90ae\u7bb1\u5730\u5740\u4e0d\u6b63\u786e"}},identification:{cbajax:e,pattern:/^[\d]{17}[\dxX]{1}$/,tips:{empty_tip:"\u8bf7\u8f93\u5165\u8eab\u4efd\u8bc1\u53f7",format_tip:"\u8bf7\u8f93\u5165\u771f\u5b9e\u7684\u8eab\u4efd\u8bc1\u53f7",1:"\u8be5\u8eab\u4efd\u8bc1\u5df2\u88ab\u7ed1\u5b9a5\u4e2a\u8d26\u53f7"}},sameidcard:{cbajax:e,pattern:/^[\d]{17}[\dxX]{1}$/,tips:{empty_tip:"\u8bf7\u8f93\u5165\u8eab\u4efd\u8bc1\u53f7",format_tip:"\u8bf7\u8f93\u5165\u771f\u5b9e\u7684\u8eab\u4efd\u8bc1\u53f7",1:"\u8bc1\u4ef6\u53f7\u4e0d\u4e00\u81f4"}},checkcode:{cbajax:e,pattern:/^[0-9a-zA-Z]{4}$/,tips:{empty_tip:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",format_tip:"\u8bf7\u8f93\u51654\u4f4d\u9a8c\u8bc1\u7801",1:"\u9a8c\u8bc1\u7801\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"}},checkrsgcode:{cbajax:function(a){var b=0;$.ajax({type:"POST",url:"/mainajax/uinfoCheck",data:a,dataType:"json",async:!1,success:function(a){b=a;0==b?closeTimer(1):recaptcha_reg()}});return b},pattern:/^[0-9a-zA-Z]{4}$/,tips:{empty_tip:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",format_tip:"\u8bf7\u8f93\u51654\u4f4d\u9a8c\u8bc1\u7801",1:"\u8bf7\u8f93\u5165\u56fe\u7247\u4e0a\u7684\u5b57\u6bcd"}},checkmsgcode:{cbajax:e,pattern:/^[0-9a-zA-Z]{6}$/,tips:{empty_tip:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",format_tip:"\u8bf7\u8f93\u51656\u4f4d\u9a8c\u8bc1\u7801",1:"\u9a8c\u8bc1\u7801\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"}},checkecode:{tips:{empty_tip:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"}},password:{cbfun:function(a,b){if(a==this.$form.find('input[name\x3d"username"]').val())return b.call(this,"\x3cdiv\x3e\u5bc6\u7801\u4e0d\u80fd\u4e0e\u5e10\u53f7\u4e00\u81f4\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\x3c/div\x3e",null,"error"),!1;var c=function(a){function b(a){var b,c=["[0-9]","[a-z]","[A-Z]","[\\W_]"],d=0,e="";b=a.length;b=0+(18<b?18:b);for(var g=0,h=c.length;g<h;g++)eval("/"+c[g]+"/").test(a)&&(b+=4);g=0;for(h=c.length;g<h;g++)a.match(eval("/"+c[g]+"/g"))&&2<=a.match(eval("/"+c[g]+"/g")).length&&(b+=2),a.match(eval("/"+c[g]+"/g"))&&5<=a.match(eval("/"+c[g]+"/g")).length&&(b+=2);g=0;for(h=a.length;g<h;g++)a.charAt(g)==e?d++:e=a.charAt(g);return b-1*d}function d(a){var b=a.substring(0,1);if((new RegExp("^"+b+"+$")).test(a))return!1;if("a"==b||"A"==b){f=a.charCodeAt(0);for(i=1;i<a.length;i++)if(tmp=a.charCodeAt(i),tmp-f!=i)return!0;return!1}return!0}var c=0,c="123456"==a||"654321"==a||"111222"==a||0==d(a)?0:b(a);return 10>=c?1:11<=c&&20>=c?2:21<=c&&30>=c?3:4}(a),e=function(a){var b,c=0,d={1:"\u5f31",2:"\u4e2d",3:"\u5f3a",4:"\u6781\u4f73"};b='\x3cdiv class\x3d"pwd_streng pwd_streng_'+a+'" \x3e';for(c in d)b=c<=a?b+'\x3ci class\x3d"on"\x3e\x3c/i\x3e':b+"\x3ci\x3e\x3c/i\x3e";b+='\x3cem class\x3d"streng_field"\x3e'+d[a]+"\x3c/em\x3e";return b+"\x3c/div\x3e"}(c);if(2>c)return b.call(this,e,null,"error"),!1;b.call(this,"\x3cspan\x3e\u5bc6\u7801\u72b6\u6001\x3c/span\x3e"+e,null,"ok");return!0},cbajax:e,keep:!0,min_len:6,max_len:16,tips:{empty_tip:"\u8bf7\u8f93\u5165\u5bc6\u7801",format_tip:"\u652f\u6301\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u7b26\u53f7\u7684\u7ec4\u5408\uff0c6-16\u4e2a\u5b57\u7b26",min_len_tip:"\u6700\u5c116\u4e2a\u5b57\u7b26",max_len_tip:"\u6700\u591a16\u4e2a\u5b57\u7b26",1:"\u8be5\u5bc6\u7801\u548c\u767b\u5f55\u5bc6\u7801\u76f8\u540c"}},recharge_money:{min:1,pattern:/^\d+$/,tips:{min_tip:"\u81f3\u5c11\u5145\u503c1\u5143\u4ee5\u4e0a\u6574\u6570",empty_tip:"\u8bf7\u9009\u62e9\u5145\u503c\u91d1\u989d",format_tip:"\u8bf7\u8f93\u5165\u6574\u6570\u91d1\u989d"}},withdraw_money:{min:10,pattern:/^\+?([0-9]+|[0-9]+\.[0-9]{0,2}|\.[0-9]{0,2})$/,tips:{min_tip:"\u5355\u7b14\u63d0\u73b0\u91d1\u989d\u6700\u5c11\u4e3a10\u5143",empty_tip:"\u8bf7\u8f93\u5165\u63d0\u6b3e\u91d1\u989d",format_tip:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u63d0\u6b3e\u91d1\u989d"}},bankcard:{pattern:/^\d{16,19}$/,tips:{empty_tip:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u94f6\u884c\u5361\u53f7",format_tip:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u94f6\u884c\u5361\u53f7"}},chinese:{cbajax:e,pattern:/^[\u4e00-\u9fa5\u00b7]{2,10}$/,tips:{empty_tip:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u4e2d\u6587\u540d",format_tip:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u4e2d\u6587\u540d",1:"\u4e0e\u5b9e\u540d\u8ba4\u8bc1\u4fe1\u606f\u4e0d\u4e00\u81f4"}},qq:{pattern:/^\d{5,10}$|^\s*$/,tips:{format_tip:"\u8bf7\u8f93\u5165\u6b63\u786eQQ\u53f7"}},number:{pattern:/\d+/},required:{pattern:/.+/},same:{tips:{empty_tip:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801",format_tip:"\u518d\u8f93\u4e00\u6b21\u4e0a\u9762\u7684\u5185\u5bb9"}}};(cx.vform=function(a,b){b||(b={});this.$form=$(a);this.$tip=this.$form.find(".tip");this.$eles=this.$form.find(".vcontent");this.callback=b.callback||null;this.errorCallback=b.errorCallback||null;this.submit=b.submit||null;this.renderTip=this[b.renderTip]||this.renderTip;this.sValidate=this[b.sValidate]||this.validateAll;this.checklogin=b.checklogin||!1;this.data={};this.tip=null;this.init()}).prototype={init:function(){var a=this;this.$eles.filter("[data-noblur!\x3d1]").blur(function(){"readonly"!=$(this).attr("readonly")&&a.validate(this)});this.$eles.filter("[data-noblur!\x3d1]").focus(function(){"readonly"!=$(this).attr("readonly")&&a.showtips(this)});this.$form.on("click",".submit",function(){a.checklogin&&!$.cookie("name_ie")?cx.PopAjax.login(1):a.sValidate()?$.isFunction(a.callback)&&a.callback():$.isFunction(a.errorCallback)&&a.errorCallback()});this.$eles.keypress(function(b){a.checklogin&&!$.cookie("name_ie")?cx.PopAjax.login(1):13==b.which&&(a.sValidate()?$.isFunction(a.callback)&&a.callback():$.isFunction(a.errorCallback)&&a.errorCallback())})},renderTip:function(a){""==a?this.tip.hide().html(""):(this.tip.removeClass("hidden").show().html(a),this.tip.parent().removeClass("hidden").show())},renderTips:function(a,b,c){this.tip=b||this.tip;c=c||(""==a?"ok":"error");this.tip.closest(".form-tip").removeClass("form-tip-error form-tip-true");this.tip.closest(".nform-tip").removeClass("nform-tip-error form-tip-true");"ok"==c?(this.tip.closest(".form-tip").addClass("form-tip-true").removeClass("hide"),this.tip.closest(".nform-tip").addClass("nform-tip-true").removeClass("hide")):(this.tip.closest(".form-tip").addClass("form-tip-error").removeClass("hide"),this.tip.closest(".nform-tip").addClass("nform-tip-error").removeClass("hide"));""==a?this.tip.hide().html(""):this.tip.show().html(a)},setcontainer:function(a){var b=null;1<=this.$tip.length&&this.$tip.each(function(){$(this).hasClass($(a).attr("name"))&&(b=this)});this.tip=$(b)},validate:function(a,b){var c,e,d,m,k;c=$.trim(this.$form.find(a).val());e=$(a).data("rule");m=$(a).attr("data-ajaxcheck");k=$(a).data("encrypt");this.setcontainer(a);if($(a).is(":hidden")&&"hidden"!=$(a).attr("type"))return!0;if("checkbox"==$(a).attr("type"))if("checked"!=$(a).attr("checked")){if(e)return this.renderTip("\u8bf7\u540c\u610f\u7528\u6237\u534f\u8bae"),!1;c="";$(a).val("")}else c=1,$(a).val("1");var h=$(a).attr("name");""!=h&&(this.data[h]=c,"1"==k&&(this.data[h]=cx.rsa_encrypt(c),this.data.encrypt||(this.data.encrypt=""),-1==this.data.encrypt.indexOf(h)&&(this.data.encrypt+=h+"|")));if("same"==e&&(k=this.data[$(a).data("with")],this.data[h]!=k))return this.renderTip("\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4"),!1;if(e in l){d=l[e];if(d.tips&&d.tips.empty_tip&&""===c)return this.renderTip(d.tips.empty_tip),!1;if("min_len"in d&&c.length<d.min_len)return d.tips?this.renderTip(d.tips.min_len_tip):this.renderTip($(a).data("tip")),!1;if("max_len"in d&&c.length>d.max_len)return d.tips?this.renderTip(d.tips.max_len_tip):this.renderTip($(a).data("tip")),!1;if(d.pattern&&!d.pattern.test(c))return d.tips?this.renderTip(d.tips.error_tip||d.tips.format_tip):this.renderTip($(a).data("tip")),!1;if("min"in d&&(c=parseFloat(c,10),c<d.min))return this.renderTip(d.tips.min_tip),!1;if("max"in d&&(c=parseFloat(c,10),c>d.max))return this.renderTip(d.tips.max_tip),!1;if(d.cbfun&&$.isFunction(d.cbfun)&&!d.cbfun.call(this,c,this.renderTip))return!1;if("1"==m&&"1"!=b&&(c=$("."+$(a).data("freeze")),d.cbajax&&$.isFunction(d.cbajax))){e=h+"\x3d"+this.data[h];"undefined"!=typeof this.data.encrypt&&(e+="\x26encrypt\x3d"+this.data.encrypt);if(e=d.cbajax.call(this,e))return this.renderTip(d.tips[e]),c&&(c.addClass("disabled"),c.addClass("lnk-getvcode-disb")),"username"==h&&$(".lnk-getvcode").addClass("lnk-getvcode-disb"),!1;c&&(c.removeClass("disabled"),c.removeClass("lnk-getvcode-disb"));$(".lnk-getvcode").hasClass("lnk-getvcode-disb")&&$(".lnk-getvcode").removeClass("lnk-getvcode-disb")}}!d||"keep"in d||this.renderTip("");return!0},validateAll:function(){var a,b=this;this.$form.find(".vcontent").each(function(c,e){a=$(this);if(!b.validate(a))return!1});this.submit&&this.submit.apply(this,[this.data]);return!0},submitValidate:function(){for(var a,b=0;b<this.$eles.length;++b){if($(this.$tip[b]).closest(".form-tip").hasClass("form-tip-error")||$(this.$tip[b]).closest(".nform-tip").hasClass("nform-tip-error"))return!1;a=$(this.$eles[b]);if(!this.validate(a,1))return!1}this.submit&&this.submit.apply(this,[this.data]);return!0},showtips:function(a){if(ruleName=$(a).data("rule"))if(name=$(a).attr("name"),ruleName in l){a=$("."+name);var b=0<a.closest(".form-tip").length?a.closest(".form-tip"):0<a.closest(".nform-tip").length?a.closest(".nform-tip"):null;b&&b.data("formattip")?a.html(b.data("formattip")).show():(rule=l[ruleName],a.html(rule.tips.format_tip).show());a.closest(".form-tip").removeClass("form-tip-error form-tip-true hide");a.closest(".nform-tip").removeClass("nform-tip-error form-tip-true hide")}}}})();