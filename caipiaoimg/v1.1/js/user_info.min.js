$(function(){window.cx||(window.cx={});var Counter=cx.Counter=function(options){this.start=options.start;this.stop=options.stop||0;this.step=options.step||1E3;this.timer=null};Counter.prototype.countDown=function(cb,fcb){var self=this;if(self.start<=self.stop){if($.isFunction(fcb))setTimeout(fcb,1E3);return}else if(!cx.closeCount){var dialogs=$(".pop-alert");if(dialogs)dialogs.each(function(){var dialog=$(this);dialog.find(".btn-confirm").trigger("click")})}this.timer=setInterval(function(){if($.isFunction(cb))cb(self.start);self.start-=self.step;if(self.start<self.stop){if(!cx.closeCount)new cx.Alert({content:"\u671f\u53f7\u66f4\u65b0\u4e2d\uff0c\u8bf7\u7a0d\u7b49\uff01",confirmCb:function(){location.href=location.href}});clearInterval(self.timer);if($.isFunction(fcb))fcb()}},1E3)};var me={};var QuickCast=function(selector,options){this.$el=$(selector);this.$randNum=this.$el.find(".rand-nums");this.lotteryId=options.lotteryId;this.randStrs=null;this.issue=options.issue;this.playType=options.playType||null;this.init()};QuickCast.render=function(ballBoxes){var tpl="";ballBoxes=ballBoxes.balls;if(ballBoxes.length>0)tpl+=QuickCast.renderBalls(ballBoxes[0],"ball-red");if(ballBoxes.length>1)tpl+=QuickCast.renderBalls(ballBoxes[1],"ball-blue");return tpl};QuickCast.pad=function(i){if(isNaN(parseInt(i,10)))return i;i=""+i;if(i.length<2)i="0"+i;return i};QuickCast.renderBalls=function(balls,color){var tpl="";for(var i=0;i<balls.length;++i)tpl+='\x3cspan class\x3d"ball '+color+'"\x3e'+this.pad(balls[i])+"\x3c/span\x3e";return tpl};QuickCast.prototype={init:function(){var self=this;this.$el.on("click",".switch-cast",function(e){self.random();e.preventDefault()});this.$el.on("click",".do-cast",function(e){if(self.getError()){new cx.Alert({content:"\u6295\u6ce8\u4e0d\u7b26\u5408\u73a9\u6cd5\u89c4\u5219"});return}var $this=$(this);var castStr=cx.Lottery.toCastString(self.lotteryId,[self.randStrs],self.playType);var playType=parseInt(cx.Lottery.playTypes[self.lotteryId][self.playType],10)||0;var lidUrl={23529:"/dlt"};location.href=lidUrl[self.lotteryId]+"?codes\x3d"+encodeURIComponent(castStr)+"\x26playType\x3d"+encodeURIComponent(playType);e.preventDefault()})},setCollection:function(collection){this.collection=collection},random:function(){var self=this;this.randStrs=this.collection.rand();this.$randNum.html(QuickCast.render(this.randStrs))},getError:function(){return $.inArray(true,this.collection.getError())!==-1},pad:function(i){i=""+i;if(i.length<2)i="0"+i;return i}};var dltIssue=new cx.Issue(".lottery-dlt",{lotteryId:cx.Lottery.DLT});var dltCast=new QuickCast(".lottery-dlt",{lotteryId:cx.Lottery.DLT,issue:dltIssue});var dltPreBox=new cx.BallBox(".rand-dlt .redball",{amount:35,min:5});var dltPostBox=new cx.BallBox(".rand-dlt .blueball",{amount:12,min:2});var dltCollection=new cx.BoxCollection;dltCollection.add(dltPreBox);dltCollection.add(dltPostBox);dltCast.setCollection(dltCollection);dltCast.random()});